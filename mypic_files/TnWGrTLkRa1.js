/*!CK:238793300!*//*1375709736,178195489*/

if (self.CavalryLogger) { CavalryLogger.start_js(["xOeZM"]); }

__d("BlueBarMinWidth",["Arbiter","DOM","DOMDimensions","Event","Locale","Style","Vector","$","csx","queryThenMutateDOM"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('DOM'),i=b('DOMDimensions'),j=b('Event'),k=b('Locale'),l=b('Style'),m=b('Vector'),n=b('$'),o=b('csx'),p=b('queryThenMutateDOM');f.init=function(){var q=n('pageHead'),r=h.find(q,"._59g8"),s,t=p.bind(null,function(){var u=i.getElementDimensions(q).width,v;if(k.isRTL()){v=-m.getElementPosition(q).x;}else v=m.getElementPosition(q).x+u-i.getViewportDimensions().width;if(v>0){var w=i.measureElementBox(q,'width',true);s=u-v-w+'px';}else s='';},function(){l.set(r,'width',s);},'BlueBarMinWidth');j.listen(window,'resize',t);g.subscribe(['LitestandSidebar/expand','LitestandSidebar/collapse'],t);t();};});
__d("BrowseLogger",["Banzai","copyProperties","Run"],function(a,b,c,d,e,f){var g=b('Banzai'),h=b('copyProperties'),i=b('Run'),j='browse',k='browse_aggr',l=null,m={},n={};function o(){l=null;m={};n={};}function p(v){h(v,{clientSessionID:l});return v;}function q(v){g.post(j,p(v));}function r(){if(l===null)return;n.aggregated=m;g.post(k,p(n));o();}function s(v){m[v]=(m[v]||0)+1;}function t(v){h(n,v);}i.onUnload(r);var u={newSession:function(){r();l=Math.random().toString();if(!n.start_time)n.start_time=Math.round(Date.now()/1000);},logResultClick:function(v,w){var x={action:'result_click',click_type:v.ct||'result',id:v.id||0,path:v.path||'unknown',rank:v.rank||0,referrer:v.referrer||'unknown',result_type:v.result_type||'unknown',session_id:v.session_id||0,query_time:v.query_time,abtest_version:v.abtest_version||'NONE',abtest_params:v.abtest_params,typeahead_sid:v.typeahead_sid||'',click_action:w};s('result_click_'+x.click_type);t({path:x.path,referrer:x.referrer,result_type:x.result_type,session_id:x.session_id,abtest_version:x.abtest_version,abtest_params:x.abtest_params,typeahead_sid:x.typeahead_sid});q(x);},logControlsClick:function(v,w){var x={action:'controls_click',click_type:w,path:v.path||'unknown',referrer:v.referrer||'unknown',session_id:v.session_id||0,query_time:v.query_time,filter_name:v.name||'unknown',typeahead_sid:v.typeahead_sid||'',result_type:v.result_type||'unknown'};s('controls_click_'+w);t({path:x.path,referrer:x.referrer,session_id:x.session_id,typeahead_sid:x.typeahead_sid});q(x);},logResultHover:function(v,w){var x={action:'result_hover',id:v.id||0,path:v.path||'unknown',rank:v.rank,session_id:v.session_id||0,query_time:v.query_time,time_elapsed:w,typeahead_sid:v.typeahead_sid||0};s('result_hover');t({path:x.path,session_id:x.session_id,typeahead_sid:x.typeahead_sid});q(x);},logNUXStep:function(v){var w={action:'nux_step',step:v};q(w);},logDisambiguationImpression:function(v,w,x,y,z){var aa={action:'disambiguation_imp',ids:y,name:v,path:x,type:w,typeahead_sid:z};q(aa);},logDisambiguationClick:function(v,w,x,y,z,aa){var ba={action:'disambiguation_clk',id:z,index:y,name:v,path:x,type:w,typeahead_sid:aa};q(ba);}};e.exports=u;});
__d("LitestandNewsfeedCountUpdater",["Arbiter","AsyncRequest","LitestandMessages","LitestandSidebarBookmarkConfig","emptyFunction"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('LitestandMessages'),j=b('LitestandSidebarBookmarkConfig'),k=b('emptyFunction'),l,m;function n(){m&&clearTimeout(m);if(l)return;m=setTimeout(o,j.nf_count_query_interval_ms,false);}function o(){if(l)return;new h().setURI('/ajax/litestand/newsfeed_count').setHandler(function(r){if(l)return;p(r.getPayload());n();}).setAllowCrossPageTransition(true).send();}function p(r){g.inform(i.UPDATE_HOME_COUNT,{count:r,onHome:l},g.BEHAVIOR_STATE);}var q={init:function(){q.init=k;g.subscribe(i.NEWSFEED_LOAD,function(){l=true;p(0);});g.subscribe(i.LEAVE_HOME,function(){l=false;n();});n();}};e.exports=q;});
__d("LitestandChromeHomeCount",["Arbiter","CSS","DOM","LitestandMessages","LitestandNewsfeedCountUpdater","$","csx","cx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('LitestandMessages'),k=b('LitestandNewsfeedCountUpdater'),l=b('$'),m=b('csx'),n=b('cx'),o=20,p,q,r,s,t={init:function(u){s=u;q=i.find(l('pageHead'),"._5ahz");p=q.parentNode;r=false;g.subscribe(j.UPDATE_HOME_COUNT,function(v,w){t.updateBadge(w.onHome?0:w.count);});k.init();t.updateBadge(s);},updateBadge:function(u){s=u;var v=u>0;t.toggleBadge(v);if(v){var w=u>o?o+'+':u;i.setContent(q,w);}},toggleBadge:function(u){if(r===u)return;r=u;h.conditionClass(p,"_5ahy",!u);}};e.exports=t;});
__d("FacebarDisambiguationDialog",["Event","BrowseLogger","CSS","cx","Dialog","DOM","FacebarStructuredText","FacebarTypeaheadEntityItem","tx"],function(a,b,c,d,e,f){var g=b('Event'),h=b('BrowseLogger'),i=b('CSS'),j=b('cx'),k=b('Dialog'),l=b('DOM'),m=b('FacebarStructuredText'),n=b('FacebarTypeaheadEntityItem'),o=b('tx'),p=650;function q(r,s,t,u,v){this._sets=r;this._path=s;this._ondone=t;this._oncancel=u;this._selection=[];this._typeaheadSID=v;}q.prototype.show=function(){new k().setTitle("Which of these did you mean?").setBody(this._createBody()).setContentWidth(p).setModal(true).setButtons([k.CONFIRM,k.CANCEL]).setHandler(this._handleDone.bind(this)).setCancelHandler(this._handleCancel.bind(this)).show();this._sets.forEach(function(r){var s=[];r.forEach(function(u){s.push(u.uid);});var t=r[0];h.logDisambiguationImpression(t.text,t.type,this._path,s.join(','),this._typeaheadSID);}.bind(this));};q.prototype._createBody=function(){var r=[];this._sets.forEach(function(s,t){r.length&&r.push(l.create('li',{className:"_200"}));s.forEach(function(u){var v=this._createItem(u,t);this._selection[t]||this._selectItem(v);r.push(v.root);}.bind(this));}.bind(this));return l.create('ul',{className:'viewList disambiguationList'},r);};q.prototype._createItem=function(r,s){var t={uri:null,subtext:r.subtext,category:r.category,photo:r.photo,type:r.type,structure:m.fromStruct([{text:r.text,type:'ent:'+r.type,uid:r.uid}])},u=l.create('div',{className:"_201"}),v=new n(t).setAux(i.hide(u)).setShouldRenderEducation(false).render(),w={setId:s,result:r,root:v,check:u};i.addClass(v,"_6i3");g.listen(v,'mouseover',this._toggleHover.bind(this,w,true));g.listen(v,'mouseout',this._toggleHover.bind(this,w,false));g.listen(v,'click',function(event){this._selectItem(w);return event.kill();}.bind(this));return w;};q.prototype._toggleHover=function(r,s){i.conditionClass(r.root,'selected',s);};q.prototype._toggleCheck=function(r,s){i.conditionShow(r.check,s);};q.prototype._selectItem=function(r){var s=this._selection[r.setId];this._selection[r.setId]=r;s&&this._toggleCheck(s,false);this._toggleCheck(r,true);};q.prototype._handleDone=function(r){this._ondone(r==k.CONFIRM?this._selection.map(function(s){var t=s.result;h.logDisambiguationClick(t.text,t.type,this._path,t.index,t.uid,this._typeaheadSID);return t;}.bind(this)):null);};q.prototype._handleCancel=function(){this._oncancel();};e.exports=q;});