/*!CK:976733805!*//*1375889052,173214301*/

if (self.CavalryLogger) { CavalryLogger.start_js(["2toWU"]); }

__d("XUICloseButton.react",["AbstractButton.react","React","cx","tx"],function(a,b,c,d,e,f){var g=b('AbstractButton.react'),h=b('React'),i=b('cx'),j=b('tx'),k=h.createClass({displayName:'XUICloseButton',getDefaultProps:function(){return {size:'medium',shade:'dark'};},render:function(){var l=this.props.size,m=this.props.shade,n=(("_50zy")+(l==='small'?' '+"_50zz":'')+(l==='medium'?' '+"_50-0":'')+(m==='light'?' '+"_50z_":'')+(m==='dark'?' '+"_50z-":'')),o=this.props.label,p=this.props.title;if(!this.props.title&&!this.props.tooltip){if(!o)o="Remove";p=o;}return this.transferPropsTo(g({label:o,title:p,'aria-label':this.props.tooltip,'data-hover':this.props.tooltip&&'tooltip','data-tooltip-alignh':this.props.tooltip&&'center',className:n}));}});e.exports=k;});
__d("EntstreamFullWidthPhoto",["Animation","CSS","DOM","DOMQuery","EntstreamFullWidthPhotoConfig","Event","Rect","SubscriptionsHandler","Style","Vector","csx","cx","queryThenMutateDOM","tidyEvent","throttle"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('CSS'),i=b('DOM'),j=b('DOMQuery'),k=b('EntstreamFullWidthPhotoConfig'),l=b('Event'),m=b('Rect'),n=b('SubscriptionsHandler'),o=b('Style'),p=b('Vector'),q=b('csx'),r=b('cx'),s=b('queryThenMutateDOM'),t=b('tidyEvent'),u=b('throttle'),v=60,w=100,x=.75;function y(z){this.$EntstreamFullWidthPhoto0=k.gk_tag_suggest;this.$EntstreamFullWidthPhoto1=k.gk_overlay;this.$EntstreamFullWidthPhoto2=k.timings;this.$EntstreamFullWidthPhoto3=[];this.$EntstreamFullWidthPhoto4=false;this.$EntstreamFullWidthPhoto5=null;this.$EntstreamFullWidthPhoto6=false;this.$EntstreamFullWidthPhoto7=i.find(z,"._cti");this.$EntstreamFullWidthPhoto8=i.find(this.$EntstreamFullWidthPhoto7,"._562u");this.$EntstreamFullWidthPhoto9=i.find(this.$EntstreamFullWidthPhoto7,"._1_vo");if(this.$EntstreamFullWidthPhoto1)this.$EntstreamFullWidthPhotoa();if(this.$EntstreamFullWidthPhoto0)this.$EntstreamFullWidthPhoto3=j.scry(this.$EntstreamFullWidthPhoto8,"._5cnb");var aa;s(function(){aa=this.$EntstreamFullWidthPhoto9.clientHeight;}.bind(this),function(){h.conditionClass(this.$EntstreamFullWidthPhoto8,"_518x",aa<=v);h.conditionClass(this.$EntstreamFullWidthPhoto8,"_518y",aa>=w);}.bind(this));}y.prototype.$EntstreamFullWidthPhotoa=function(){t([l.listen(this.$EntstreamFullWidthPhoto7,'mouseover',this.$EntstreamFullWidthPhotoc.bind(this)),l.listen(this.$EntstreamFullWidthPhoto7,'mouseout',this.$EntstreamFullWidthPhotod.bind(this))]);};y.prototype.$EntstreamFullWidthPhotoc=function(z,aa){if(!this.$EntstreamFullWidthPhotof){this.$EntstreamFullWidthPhotof=new g(this.$EntstreamFullWidthPhoto8);this.$EntstreamFullWidthPhotog=new m(this.$EntstreamFullWidthPhoto7).convertTo('document');}this.$EntstreamFullWidthPhoto4=true;this.$EntstreamFullWidthPhotoh=false;this.$EntstreamFullWidthPhotof.stop();window.clearTimeout(this.$EntstreamFullWidthPhoto5);if(!this.$EntstreamFullWidthPhotoi)this.$EntstreamFullWidthPhotoi=new n();this.$EntstreamFullWidthPhotoi.engage();this.$EntstreamFullWidthPhotoi.addSubscriptions(l.listen(window,'mousemove',u(this.$EntstreamFullWidthPhotoj.bind(this))),l.listen(window,'scroll',u(this.$EntstreamFullWidthPhotok.bind(this))));var ba=aa?this.$EntstreamFullWidthPhoto2.trans_duration:this.$EntstreamFullWidthPhoto2.in_duration,ca=aa?this.$EntstreamFullWidthPhoto2.trans_timeout:this.$EntstreamFullWidthPhoto2.in_timeout;this.$EntstreamFullWidthPhotol(0,ba,ca);};y.prototype.$EntstreamFullWidthPhotod=function(){this.$EntstreamFullWidthPhotoi&&this.$EntstreamFullWidthPhotoi.release();this.$EntstreamFullWidthPhoto4=false;this.$EntstreamFullWidthPhotoh=false;this.$EntstreamFullWidthPhotof&&this.$EntstreamFullWidthPhotof.stop();window.clearTimeout(this.$EntstreamFullWidthPhoto5);this.$EntstreamFullWidthPhotof&&this.$EntstreamFullWidthPhotol(1,this.$EntstreamFullWidthPhoto2.out_duration,this.$EntstreamFullWidthPhoto2.out_timeout);};y.prototype.$EntstreamFullWidthPhotoj=function(event){var z=p.getEventPosition(event,'document');if(this.$EntstreamFullWidthPhoto4&&!this.$EntstreamFullWidthPhotog.contains(z)){this.$EntstreamFullWidthPhotod();}else if(this.$EntstreamFullWidthPhoto4&&this.shouldCancelHover(z)){this.$EntstreamFullWidthPhotoh=true;window.clearTimeout(this.$EntstreamFullWidthPhoto5);this.$EntstreamFullWidthPhotof&&this.$EntstreamFullWidthPhotof.stop();this.$EntstreamFullWidthPhotol(1,this.$EntstreamFullWidthPhoto2.out_duration,0);}else if(this.$EntstreamFullWidthPhotoh&&!this.shouldCancelHover(z))this.$EntstreamFullWidthPhotoc(null,true);};y.prototype.$EntstreamFullWidthPhotok=function(){if(this.$EntstreamFullWidthPhoto4&&this.$EntstreamFullWidthPhoto5){window.clearTimeout(this.$EntstreamFullWidthPhoto5);this.$EntstreamFullWidthPhotol(0,this.$EntstreamFullWidthPhoto2.in_duration,this.$EntstreamFullWidthPhoto2.in_timeout);}};y.prototype.$EntstreamFullWidthPhotom=function(z){var aa=new m(z);aa.l-=parseInt(o.get(z,'margin-left'),10);aa.r+=parseInt(o.get(z,'margin-right'),10);aa.t-=parseInt(o.get(z,'margin-top'),10);aa.b+=x*parseInt(o.get(z,'margin-bottom'),10);return aa;};y.prototype.$EntstreamFullWidthPhotol=function(z,aa,ba){this.$EntstreamFullWidthPhoto5=window.setTimeout(function(){this.$EntstreamFullWidthPhotof.to('opacity',z).ease(g.ease.end).duration(aa).go();this.$EntstreamFullWidthPhoto5=null;}.bind(this),ba);};y.prototype.shouldCancelHover=function(z){if(!this.$EntstreamFullWidthPhoton)this.$EntstreamFullWidthPhoton=this.$EntstreamFullWidthPhotom(this.$EntstreamFullWidthPhoto9);if(this.$EntstreamFullWidthPhoto3.length>0&&!this.$EntstreamFullWidthPhotoo)this.$EntstreamFullWidthPhotoo=new m(this.$EntstreamFullWidthPhoto3[0]);return this.$EntstreamFullWidthPhoton.contains(z)||(this.$EntstreamFullWidthPhotoo&&this.$EntstreamFullWidthPhotoo.contains(z));};e.exports=y;});
__d("EntstreamStoryAudienceWidget",["CSS","Event","Run","SubscriptionsHandler"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('Event'),i=b('Run'),j=b('SubscriptionsHandler'),k={};k.init=function(l){var m=new j();m.addSubscriptions(h.listen(l,'mouseover',g.removeClass.curry(l,'selected')),h.listen(l,'mouseout',g.addClass.curry(l,'selected')));i.onLeave(m.release.bind(m));};e.exports=k;});
__d("EntstreamFeedObject",["Parent","cx"],function(a,b,c,d,e,f){var g=b('Parent'),h=b('cx'),i={getRoot:function(j){return g.byClass(j,"_6ns");}};e.exports=i;});
__d("EntstreamFeedObjectFollowup",["CSS","DOM","EntstreamFeedObject","Event","React","XUICloseButton.react","csx","cx","ge"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('EntstreamFeedObject'),j=b('Event'),k=b('React'),l=b('XUICloseButton.react'),m=b('csx'),n=b('cx'),o=b('ge'),p={hasFollowup:function(q){var r=h.scry(q,"._1f84");return (r&&r[0]);},getFollowup:function(q){return h.find(q,"._1f84");},addFollowup:function(q,r,s){var t=h.create('div',{},r||''),u=h.create('div',{'class':"_5dh8"});k.renderComponent(l({size:"medium",shade:"dark"}),u);var v=h.create('div',{'class':"_1f84"});h.appendContent(v,u);h.appendContent(v,t);j.listen(u,'click',function(){h.remove(v);});if(s)g.addClass(v,s);if(p.hasFollowup(q)){h.replace(p.getFollowup(q),v);}else h.prependContent(q,v);},removeFollowup:function(q){var r=p.getFollowup(q);h.remove(r);},appendToFollowup:function(q,r){var s=i.getRoot(o(q)),t=p.getFollowup(s);h.appendContent(t,r);},getFollowupMessage:function(q){var r=i.getRoot(o(q)),s=h.find(r,"._1f86");return s;},replaceFollowupMessage:function(q,r){var s=p.getFollowupMessage(q);h.replace(s,r);},resetAfroFollowupContent:function(q,r){p.unhideFollowupMessage(q);var s=i.getRoot(o(q)),t=h.find(s,"._5c7j");h.replace(t,r);},hideFollowupMessage:function(q){var r=p.getFollowupMessage(q);g.hide(r);},unhideFollowupMessage:function(q){var r=p.getFollowupMessage(q);g.show(r);}};e.exports=p;});
__d("EntstreamFeedObjectFollow",["EntstreamFeedObject","EntstreamFeedObjectFollowup","Event","Parent","cx","ge"],function(a,b,c,d,e,f){var g=b('EntstreamFeedObject'),h=b('EntstreamFeedObjectFollowup'),i=b('Event'),j=b('Parent'),k=b('cx'),l=b('ge'),m={toggleFollow:function(n,o,p){var q=n.getValue()=='follow_post'?p.follow_post:p.unfollow_post,r=g.getRoot(l(o));if(h.hasFollowup(r)){h.replaceFollowupMessage(r,q);}else{h.addFollowup(r,q,"_521o");var s=h.getFollowup(r);i.listen(s,'click',function(event){var t=event.getTarget(),u="_1f89";if(j.byClass(t,u)){m.toggleFollow(n,o,p);n.toggleMenuItem();}});}}};e.exports=m;});
__d("EntstreamFeedObjectHide",["Event","CSS","EntstreamFeedObject","EntstreamFeedObjectFollowup","Focus","TabbableElements","cx","ge"],function(a,b,c,d,e,f){var g=b('Event'),h=b('CSS'),i=b('EntstreamFeedObject'),j=b('EntstreamFeedObjectFollowup'),k=b('Focus'),l=b('TabbableElements'),m=b('cx'),n=b('ge'),o={hide:function(p,q){var r=i.getRoot(n(p));j.addFollowup(r,q);h.addClass(r,"_i6m");o.setFocus(r);},registerUnhide:function(p){g.listen(p,'click',function(){o.unhide(i.getRoot(p));});},setFocus:function(p){var q=l.find(p);if(q&&q[0])k.setWithoutOutline(q[0]);},unhide:function(p){j.removeFollowup(p);h.removeClass(p,"_i6m");o.setFocus(p);}};e.exports=o;});
__d("YouTube",["CSS","DOM","DOMQuery","Event","Keys","UserAgent","copyProperties","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('DOMQuery'),j=b('Event'),k=b('Keys'),l=b('UserAgent'),m=b('copyProperties'),n=b('cx');function o(p,q,r){m(this,{iframe:p,autofocus:q,autoplay:r,playerState:o.STATE_UNSTARTED,muted:false,volume:100,currentTime:0,timer:null,handlers:[j.listen(p,'load',this.listening.bind(this))]});}o.prototype.id=function(){return this.iframe.id;};o.prototype.post=function(p){p.id=this.id();this.iframe.contentWindow.postMessage(JSON.stringify(p),'*');};o.prototype.listening=function(){this.post({event:'listening'});clearTimeout(this.timer);this.timer=setTimeout(this.listening.bind(this),100);};o.prototype.update=function(p){if(p.event=='initialDelivery'){clearTimeout(this.timer);if((l.webkit()||l.firefox())&&p.info&&p.info.debugText.match(/flashVersion/)){this.addAccessibleButtons();if(l.firefox())this.iframe.tabIndex=-1;}}if(p.info)['playerState','muted','volume','currentTime'].forEach(function(q){if(p.info.hasOwnProperty(q))this[q]=p.info[q];}.bind(this));};o.prototype.togglePlay=function(){this.post({event:'command',func:(this.playerState==o.STATE_PLAYING)?'pauseVideo':'playVideo'});};o.prototype.toggleMute=function(){this.post({event:'command',func:this.muted?'unMute':'mute'});};o.prototype.addAccessibleButtons=function(p){this.addAccessibleButton('Mute',"_505m",this.toggleMute.bind(this));var q=this.addAccessibleButton('Play',"_505n",this.togglePlay.bind(this));if(this.autofocus)q.focus.bind(q).defer();};o.prototype.addAccessibleButton=function(p,q,r){var s=h.create('button',{'class':q,tabindex:0},p);h.insertAfter(this.iframe,s);this.handlers.push(j.listen(s,'click',r),j.listen(s,'mouseover',g.hide.curry(s)),j.listen(this.iframe,'mouseout',g.show.curry(s)),j.listen(s,'focus',function(){if(!this.autoplay&&this.playerState==o.STATE_UNSTARTED){this.post({event:'command',func:'playVideo'});this.post({event:'command',func:'pauseVideo'});}}.bind(this)),j.listen(s,'keydown',function(t){switch(t.keyCode){case k.UP:case k.DOWN:this.post({event:'command',func:'setVolume',args:[this.volume+((t.keyCode==k.UP)?10:-10)]});t.prevent();break;case k.RIGHT:case k.LEFT:this.post({event:'command',func:'seekTo',args:[this.currentTime+((t.keyCode==k.RIGHT)?10:-10)]});t.prevent();break;}}.bind(this)));return s;};o.prototype.destroy=function(){while(this.handlers.length)this.handlers.pop().remove();delete o.instances[this.id()];if(!Object.keys(o.instances).length)o.handler.remove();};o.register=function(p,q,r){if(!window.postMessage)return;if(!Object.keys(o.instances).length)o.handler=j.listen(window,'message',function(t){try{var u=JSON.parse(t.data);if(o.instances[u.id])o.instances[u.id].update(u);}catch(t){}});var s=new o(i.find(p,'iframe'),q,r);o.instances[s.id()]=s;};m(o,{STATE_UNSTARTED:-1,STATE_PLAYING:1,instances:{},handler:null});e.exports=o;});
__d("EntstreamHomeFeedObjectHide",["DOM","EntstreamFeedObjectHide","Event","TrackingNodes","URI","YouTube","csx","cx","tx","$"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('EntstreamFeedObjectHide'),i=b('Event'),j=b('TrackingNodes'),k=b('URI'),l=b('YouTube'),m=b('csx'),n=b('cx'),o=b('tx'),p=b('$'),q={stopVideo:function(r){var s=p(r),t=g.find(s,"^._59hp"),u=g.scry(t,'iframe');for(var v=0;v<u.length;v++){var w=l.instances[g.getID(u[v])];if(w&&(w.playerState===l.STATE_PLAYING))w.togglePlay();}var x=g.scry(t,'video');for(var y=0;y<x.length;y++)if(('paused' in x[y])&&!x[y].paused)if(typeof x[y].pause==='function')x[y].pause();},hide:function(r,s,t,u){var v=t=='hide'||t=='afrostart'?"This story is now hidden from your News Feed.":"This story has been marked as spam.",w=t=='hide'||t=='afrostart'?"Unhide":"Undo";q.stopVideo(r);var x=j.getTrackingInfo(j.types.UNHIDE_LINK),y=g.create('a',{href:'#','data-ft':x},w),z=new k('/ajax/entstream/home/story/unhide');if(s)z.addQueryData({token:s});if(u)z.addQueryData({hideable_token:u});if(s||u)g.setAttributes(y,{ajaxify:z,rel:'async-post'});h.registerUnhide(y);var aa=g.create('div',{'class':"_1f86"},[v,' ',y]);h.hide(r,aa);},registerHide:function(r,s,t,u){i.listen(r,'click',function(){q.hide(r.getAttribute('id'),s,t,u);});}};e.exports=q;});
__d("EntstreamHomeFeedObjectOptionsMenu",["EntstreamHomeFeedObjectHide","EntstreamFeedObjectFollow"],function(a,b,c,d,e,f){var g=b('EntstreamHomeFeedObjectHide'),h=b('EntstreamFeedObjectFollow');function i(j,k,l,m,n){j.subscribe('itemclick',function(o,p){switch(p.item.getValue()){case 'hide':case 'markspam':case 'afrostart':g.hide(k,l,p.item.getValue(),n);break;case 'follow_post':case 'unfollow_post':h.toggleFollow(p.item,k,m);break;}}.bind(this));}e.exports=i;});
__d("EntstreamUFI",["Arbiter","Parent","UFICentralUpdates","cx","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Parent'),i=b('UFICentralUpdates'),j=b('cx'),k=b('ge'),l={};i.subscribe('feedback-updated',function(n,o){var p=o.updates;for(var q in p){if(!l[q])continue;l[q].forEach(function(r){if(k(r)){var s=h.byClass(k(r),"_6ns");s&&g.inform('Entstream/StoryUpdated',{story:s});}});}});var m={register:function(n,o){var p=l[o]||(l[o]=[]);p.push(n);}};e.exports=m;});
__d("LitestandKeyboardController",["Arbiter","Class","CSS","DOM","FeedBaseKeyboardController","LitestandMessages","Parent","copyProperties","csx","cx","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Class'),i=b('CSS'),j=b('DOM'),k=b('FeedBaseKeyboardController'),l=b('LitestandMessages'),m=b('Parent'),n=b('copyProperties'),o=b('csx'),p=b('cx'),q=b('ge');function r(v){return m.byClass(v,"_4ikz");}function s(v){if(v.nextElementSibling)return v.nextElementSibling;v=v.nextSibling;while(v&&!j.isElementNode(v))v=v.nextSibling;return v||null;}function t(v){if(v.previousElementSibling)return v.previousElementSibling;v=v.previousSibling;while(v&&!j.isElementNode(v))v=v.previousSibling;return v||null;}function u(v){this.parent.construct(this,v);}h.extend(u,k);n(u,{init:function(v){new u(v);}});n(u.prototype,{init:function(){this.parent.init();this.subscriptions.addSubscriptions(g.subscribe(l.FILTER_SWITCH_BEGIN,this.onLeave.bind(this)));},getStories:function(v){return j.scry(v||this.root,"div._6ns._8ru");},getParentStory:function(v){return m.byClass(v,"_6ns");},isStory:function(v){return i.hasClass(v,"_6ns");},getHeadline:function(v){return j.scry(v,"._6nl")[0];},clickLike:function(){this.click("._6k6");},clickComment:function(){this.click("._6k2");},openAttachment:function(){this.click("._5dec","a._52c6","._gr6","._4-eo");},isHoldoutStory:function(v){return false;},getScrollOffset:function(){return 5;},setSelected:function(v){this.selected&&this.setTabindexOnHeadline(this.selected,'-1');this.setTabindexOnHeadline(v,'0');this.selected=v;},getPreviousSibling:function(v){var w=t(v);if(w&&this.getParentStory(w))return w;w=null;var x=m.byClass(v,"_6ly");if(x){var y=j.scry(x,"._6ns"),z=y.indexOf(v);if(z===0){w=q('pagelet_composer');w=w&&m.byClass(w,"_6ns");}else if(z>0)w=y[z-1];}return w||this.selected;},getPreviousStory:function(v){var w=this.getPreviousSibling(v);while(w&&!this.isStory(w))w=this.getPreviousSibling(w);return w;},getNextSibling:function(v){var w=s(v);if(w&&this.getParentStory(w))return w;w=null;var x=m.byClass(v,"_6ly");if(x){var y=j.scry(x,"._6ns"),z=y.indexOf(v);if(z>-1)w=y[z+1];}else if(q('pagelet_composer',v))w=j.scry(document,"div._6ly ._6ns")[0];return w||this.selected;},getNextStory:function(v){var w=this.getNextSibling(v);while(w&&!this.isStory(w))w=this.getNextSibling(w);return w;}});e.exports=u;});
__d("LitestandOffscreenController",["Arbiter","CSS","DOM","Event","LitestandMessages","LitestandViewportHeight","Parent","Run","Style","SubscriptionsHandler","Vector","cx","queryThenMutateDOM","runAfterScrollingStops","throttle"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('DOM'),j=b('Event'),k=b('LitestandMessages'),l=b('LitestandViewportHeight'),m=b('Parent'),n=b('Run'),o=b('Style'),p=b('SubscriptionsHandler'),q=b('Vector'),r=b('cx'),s=b('queryThenMutateDOM'),t=b('runAfterScrollingStops'),u=b('throttle'),v=1,w=9,x=7,y={},z=false,aa,ba,ca,da,ea=[];function fa(){aa&&aa.release();aa=null;z=false;}function ga(){y={};ea=[];}function ha(){for(var ta in y){var ua=y[ta];if(ua.hidden)ua.dirty=true;}}function ia(){if(l.getSize()===l.SMALL)return x;return w;}function ja(){da=da||q.getViewportDimensions().y;ba=q.getScrollPosition().y;ca=ba+da;if(v){ba-=da*v;ca+=da*v;}for(var ta in y){var ua=y[ta];ua.position=q.getElementPosition(ua.element).y;if(!ua.hidden)ua.height=ua.element.offsetHeight;}}function ka(){var ta=[];for(var ua in y){var va=y[ua],wa=va.position,xa=wa+va.height<ba,ya=wa>ca;if(!va.hidden&&(xa||ya)){la(va);}else if(!xa&&!ya){va.pendingHide=false;if(va.hidden){if(va.dirty&&wa<ba){ta.push(ua);h.addClass(ma(va),"_49nu");}else o.apply(va.element,{height:'',marginBottom:''});h.show(ma(va));va.dirty=false;va.hidden=false;}}}if(!ta.length)return;var za=0;s(function(){for(var ab=0,bb=ta.length;ab<bb;ab++){var cb=y[ta[ab]];za+=cb.height-ma(cb).offsetHeight+o.getFloat(cb.element,'marginBottom');}},function(){for(var ab=0,bb=ta.length;ab<bb;ab++){var cb=y[ta[ab]];h.removeClass(ma(cb),"_49nu");o.apply(cb.element,{height:'',marginBottom:''});}za&&(document.body.scrollTop-=za);});}function la(ta){if(!ta.pendingHide){ea.push(ta);ta.pendingHide=true;}}function ma(ta){if(ta.wrapperElement)return ta.wrapperElement;var ua=ta.element;if(ua.firstElementChild)return (ta.wrapperElement=ua.firstElementChild);for(var va=0;va<ua.childNodes.length;va++)if(ua.childNodes[va].tagName)return (ta.wrapperElement=ua.childNodes[va]);}function na(){var ta=ia()+'px';for(var ua=0;ua<ea.length;ua++){var va=ea[ua];if(va.pendingHide&&!va.hidden){o.apply(va.element,{height:va.height+'px',marginBottom:ta});h.hide(ma(va));va.hidden=true;va.pendingHide=false;}}ea=[];}function oa(){t(na,'LitestandOffscreenController/hide');s(ja,ka,'LitestandOffscreenController');}function pa(){for(var ta in y){var ua=y[ta];if(!ma(ua).childNodes.length){i.remove(ua.element);delete y[ta];}}}function qa(ta,ua){var va=m.byClass(ua.story,"_4ikz");if(!va)return;va=y[i.getID(va)];if(va&&va.hidden)va.dirty=true;}function ra(){n.onLeave(fa);aa=new p();aa.addSubscriptions(g.subscribe(k.FILTER_SWITCH_BEGIN,ga),g.subscribe(k.STORIES_REMOVED,pa),g.subscribe('Entstream/StoryUpdated',qa),g.subscribe('ViewportSizeChange',ha),j.listen(window,'scroll',u(oa)),j.listen(window,'resize',u(function(){da=null;oa();})));z=true;}var sa={attachSubstream:function(ta){z||ra();y[i.getID(ta)]={element:ta};}};e.exports=sa;});
__d("LitestandStream",["Arbiter","DOM","DOMPosition","LitestandMessages","LitestandStoryInsertionStatus","LitestandStreamConfig","ViewportBounds","copyProperties","csx","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('DOM'),i=b('DOMPosition'),j=b('LitestandMessages'),k=b('LitestandStoryInsertionStatus'),l=b('LitestandStreamConfig'),m=b('ViewportBounds'),n=b('copyProperties'),o=b('csx'),p=b('ge'),q,r,s,t,u,v,w,x={init:function(y,z,aa){q=z;r=Math.round(Date.now()/1000);t=aa;u=y;s=v=0;g.subscribe(j.STORIES_INSERTED,function(ba,ca){if(!ca||!ca.substream_id||!q)return;var da=h.scry(p(ca.substream_id),x.getStoriesSelector());da.forEach(function(ea){var fa=ea.getAttribute('data-timestamp'),ga=JSON.parse(ea.getAttribute('data-ft')).ei;if(!ga&&fa&&fa<q)s++;v++;});});},getEmptySubstreamsSelector:function(){return "._4ikz:empty";},getStoriesSelector:function(){return "._8ru";},getStreamConfig:function(y){return n({bufferPixels:1000,firstPagerScrollBuffer:100,maxStories:null,oldStoriesDelay:5000,oldStoriesLimit:30,pagerController:'LitestandMoreStoriesPagelet',pagerSelector:x.getPagerSelector(),pollIntervalMS:null,newStoryIdleTime:60000,pollerSelector:x.getPollerSelector()},y);},getPagerSelector:function(){return "._2as";},getPollerSelector:function(){return "._2zo";},getStreamRoot:function(){return u;},getVisibleStoryCount:function(y){var z=h.scry(y,x.getStoriesSelector());return z.length;},hideOffscreenSubstreams:function(){return l.hide_offscreen_substreams;},disableNewStoryBar:function(){return l.disable_new_story_bar;},hasOtherFeedsSwitcherExpansion:function(){return l.other_feeds_switcher_expand;},getOldStoryCount:function(){return s;},getTotalStoryCount:function(){return v;},getTimeBetweenLoads:function(){return r-q;},getTimeSinceLoad:function(){return Math.round(Date.now()/1000)-r;},setHomeloadID:function(y){w=y;},getHomeloadID:function(){return w;},getSectionID:function(){return t;},canInsertNewerStories:function(){if(m.getTop()>i.getElementPosition(x.getStreamRoot()).y)return false;return k.canInsert();}};e.exports=x;});
__d("LitestandViewportTracking",["Arbiter","Class","DOM","DOMDimensions","DOMPosition","LitestandMessages","LitestandStream","Parent","Vector","ViewportTracking","copyProperties","cx","recordTNTreeData"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Class'),i=b('DOM'),j=b('DOMDimensions'),k=b('DOMPosition'),l=b('LitestandMessages'),m=b('LitestandStream'),n=b('Parent'),o=b('Vector'),p=b('ViewportTracking'),q=b('copyProperties'),r=b('cx'),s=b('recordTNTreeData'),t=51;function u(){this.parent.construct(this);}h.extend(u,p);q(u.prototype,{init:function(v){this.parent.init(v);this.subscriptions.addSubscriptions(g.subscribe([l.STORIES_INSERTED,l.STORIES_REMOVED],function(){this.invalidateAllStoriesCache();this.updateTimeTrackingData(false);}.bind(this)),g.subscribe(l.NEWER_STORIES_INSERTED,function(){this.maxScrollPosition=0;this.fireTimer();}.bind(this)),g.subscribe(l.LEAVE_HOME,this.updateTimeTrackingData.bind(this,true)));},getDataFromConfig:function(v){this.recordTNTree=v.record_tn_tree;this.timeout=v.record_delay;this.isTimetrackingEnabled=!!v.is_timetracking_enabled;},getTimeout:function(){return this.timeout;},getAllStories:function(){var v=i.scry(m.getStreamRoot(),m.getStoriesSelector());return v.filter(function(w){return w.getAttribute('data-ft');});},_getStoryData:function(v){return JSON.parse(v.getAttribute('data-ft'));},getStoryID:function(v){return this._getStoryData(v).mf_story_key;},getDataToLog:function(v){var w={};if(this.recordTNTree){var x=m.getStreamRoot();w=s(v,x);}w.evt=t;return {ft:w};},isVisible:function(v){var w=this.parent.isVisible(v);if(!this.isLoose||w)return w;var x=n.byClass(v,"_4ikz");if(!x)return false;var y=o.getScrollPosition().y,z=j.getViewportDimensions().height,aa=k.getElementPosition(x).y,ba=j.getElementDimensions(x).height,ca=z+this.maxScrollPosition-y;return aa+ba<ca;}});e.exports={init:function(v){u.instance=new u();u.instance.init(v);},getInstance:function(){return u.instance;}};});
__d("LitestandComposerBase",["Animation","Arbiter","ComposerXController","DOM","LitestandMessages","Run","SubscriptionsHandler","copyProperties"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('ComposerXController'),j=b('DOM'),k=b('LitestandMessages'),l=b('Run'),m=b('SubscriptionsHandler'),n=b('copyProperties'),o=600;function p(q){this._composerID=q;this._subscriptions=new m();this.init();}n(p.prototype,{init:function(){this._subscriptions.addSubscriptions(h.subscribe('LitestandComposer/publish',function(q,r){if(r.composer_id===this._composerID)this.liveInsertComposerStory(this._composerID,r.markup);}.bind(this)),h.subscribe(k.FILTER_SWITCH_BEGIN,this._cleanup.bind(this)));l.onLeave(this._cleanup.bind(this));},_cleanup:function(){this._subscriptions&&this._subscriptions.release();this._subscriptions=null;},liveInsertComposerStory:function(q,r){q&&i.reset(q);if(!r)return;j.prependContent(this.getStreamRoot(),r);new g(r).from('opacity',0).to('opacity',1).duration(o).go();},getStreamRoot:function(){}});e.exports=p;});
__d("LitestandComposer",["Arbiter","Class","LitestandStream","LitestandComposerBase","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Class'),i=b('LitestandStream'),j=b('LitestandComposerBase'),k=b('copyProperties');function l(m){this.parent.construct(this,m);}l.initComposer=function(m){new l(m);};h.extend(l,j);k(l.prototype,{init:function(){this.parent.init();this._subscriptions.addSubscriptions(g.subscribe('LitestandComposer/globalPublish',function(m,n){if(n.top_news_id===i.getSectionID())this.liveInsertComposerStory(null,n.markup);}.bind(this)));},getStreamRoot:function(){return i.getStreamRoot();}});e.exports=l;});
__d("LitestandComposerTitleTextReset",["CSS","DOM"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM');function i(j){g.hide(j.element);h.empty(j.element);}e.exports=i;});
__d("LitestandStreamLoader",["Arbiter","AsyncRequest","CSS","DOM","DOMPosition","Event","LitestandMessages","LitestandOffscreenController","LitestandStream","NavigationMessage","OnVisible","Run","throttle","UIPagelet","URI","UserActivity","$","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOM'),k=b('DOMPosition'),l=b('Event'),m=b('LitestandMessages'),n=b('LitestandOffscreenController'),o=b('LitestandStream'),p=b('NavigationMessage'),q=b('OnVisible'),r=b('Run'),s=b('throttle'),t=b('UIPagelet'),u=b('URI'),v=b('UserActivity'),w=b('$'),x=b('ge'),y=false,z=false,aa,ba,ca,da,ea,fa,ga,ha=0,ia,ja={},ka=[];function la(){r.onLeave(ma);ka=[g.subscribe(p.NAVIGATION_BEGIN,ma),g.subscribe(m.FILTER_SWITCH_BEGIN,ma),g.subscribe(m.TOUR_BEGIN,function(){z=true;}),g.subscribe(m.TOUR_END,function(){z=false;oa();})];y=true;}function ma(){g.inform(m.LEAVE_HOME);ha=0;ka.forEach(g.unsubscribe);ka=[];ba&&ba.remove();ea&&clearTimeout(ea);ea=null;fa=null;ia&&ia.remove();ia=null;y=false;}function na(){ea=setTimeout(function(){ea=null;ta();},ja.pollIntervalMS);}function oa(){if(ja.pollIntervalMS&&ja.pollIntervalMS>1000)na();}function pa(){ba=new q(j.find(ca,'a'),ya.curry(da),false,ja.bufferPixels);}function qa(){var ab=k.getScrollPosition(document.body).y;return ab>ja.firstPagerScrollBuffer;}function ra(){if(qa()){pa();ia&&ia.remove();ia=null;}}function sa(ab){var bb=j.find(ca,'a');l.listen(bb,'click',function(event){ya(da);ia&&ia.remove();ia=null;event.preventDefault();});var cb=o.getVisibleStoryCount(ga),db=ja.maxStories;if(db&&cb>=db)return;if(ab&&!qa()){ia=l.listen(window,'scroll',s(ra));}else pa();}function ta(){if(z||!fa)return;if(!v.isActive(ja.newStoryIdleTime)){v.subscribeOnce(ta);return;}if(o.hasOtherFeedsSwitcherExpansion())new h().setURI('/ajax/litestand/other_feed_counts').setData({section_id:o.getSectionID()}).send();if(o.disableNewStoryBar()&&!o.canInsertNewerStories()){na();return;}var ab=j.find(fa,'a'),bb=u(ab.getAttribute('ajaxify'));bb.addQueryData({cursor:aa});h.bootstrap(bb,fa);}function ua(ab){var bb=j.getID(ca);i.addClass(ca,'async_saving');var cb={cursor:wa(),pager_config:ab,pager_id:bb,scroll_count:++ha};if(o.getHomeloadID())cb.homeload_id=o.getHomeloadID();t.loadFromEndpoint(ja.pagerController,j.getID(ga),cb,{append:true,automatic:true,usePipe:true});}function va(){return xa()[0].getAttribute('data-cursor');}function wa(){var ab=xa();return ab[ab.length-1].getAttribute('data-cursor');}function xa(){var ab=j.scry(ga,o.getStoriesSelector());return ab.filter(function(bb){return bb.getAttribute('data-cursor');});}function ya(ab){ua(ab);ba&&ba.remove();ba=null;}var za={register:function(ab,bb,cb,db){y||la();ja=o.getStreamConfig(bb);da=cb;ga=w(ab);aa=va();ca=db;sa(true);fa=j.scry(ga,ja.pollerSelector)[0];fa&&oa();},removeOldPager:function(ab,bb){j.remove(w(ab));i.show(w(bb));},removeLoadingIndicator:function(ab,bb){var cb=x(ab);if(cb)j.remove(cb);i.show(bb);},moreStoriesInserted:function(ab){g.inform(m.STORIES_INSERTED,{substream_id:ab});if(o.hideOffscreenSubstreams())n.attachSubstream(w(ab));},attachNewPager:function(ab){ca=ab;ca&&sa(false);},updatePollerCursor:function(ab){aa=ab;oa();}};e.exports=za;});
__d("PresenceIndicator",["Arbiter","AvailableListConstants","Chat","CSS","DOM","Event","JSLogger","Run","TooltipLink","copyProperties","tx"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AvailableListConstants'),i=b('Chat'),j=b('CSS'),k=b('DOM'),l=b('Event'),m=b('JSLogger'),n=b('Run'),o=b('TooltipLink'),p=b('copyProperties'),q=b('tx');function r(s,t,u,v,w){this._id=s;this._firstname=t;this._tooltip=v;this._showtooltip=w;this._image=k.scry(this._tooltip,'i')[0];this._previousAvail=null;this._jslog=m.create('presence_indicator');d(['ChatVisibility'],function(y){this._jslog.log('vis_init',y.isOnline());this._chatVisibility=y;this._updateVisibility();}.bind(this));this._subscriptions=[g.subscribe([h.ON_AVAILABILITY_CHANGED],this._updateAvailability.bind(this)),g.subscribe(['chat/visibility-changed'],this._updateVisibility.bind(this))];this._updateAvailability.bind(this).defer();var x=null;if(u)x=l.listen(this._tooltip,'click',function(event){d(['AvailableList'],function(y){if(this._previousAvail!=h.OFFLINE)i.openTab(this._id,null,this._getLogData());}.bind(this));}.bind(this));n.onLeave(function(){if(x)x.remove();while(this._subscriptions.length){var y=this._subscriptions.pop();y.unsubscribe();}}.bind(this));}p(r.prototype,{_getLogData:function(){var s=j.hasClass(document.documentElement,'sidebarMode');return {mode:s?'sidebar':'chatNub',source:'presence',typehead:false};},_updateAvailability:function(){d(['AvailableList','ChatConfig'],function(s,t){if(!s.isReady())return;var u=s.get(this._id);if(u===this._previousAvail)return;this._previousAvail=u;this._updateDOM(u);}.bind(this));},_updateDOM:function(s){var t,u;switch(s){case h.OFFLINE:case h.IDLE:break;case h.ACTIVE:t=q._("{name} is available to chat",{name:this._firstname});u='online';break;case h.MOBILE:t=q._("{name} is available on mobile",{name:this._firstname});u='mobile';break;default:throw new Error('Invalid availability');}if(!t){j.hide(this._tooltip);return;}if(this._showtooltip)o.setTooltipText(this._tooltip,t);j.setClass(this._image,u);j.show(this._tooltip);},_updateVisibility:function(){if(this._chatVisibility.isOnline()){j.show(this._tooltip);}else j.hide(this._tooltip);}});e.exports=r;});
__d("legacy:controlled-referer",["ControlledReferer"],function(a,b,c,d){var e=b('ControlledReferer');a.useFacebookReferer=a.useFacebookReferer||e.useFacebookReferer;a.useFacebookRefererHtml=a.useFacebookRefererHtml||e.useFacebookRefererHtml;},3);
__d("MenuTogglingItem",["DOM","MenuItem"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('MenuItem');for(var i in h)if(h.hasOwnProperty(i)&&i!=="_metaprototype")k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(){if(h!==null)h.apply(this,arguments);}k.prototype.handleClick=function(){this.toggleMenuItem();return j.handleClick.call(this);};k.prototype.toggleMenuItem=function(){this._swap('ajaxify','toggleAjaxify');this._swap('value','toggleValue');this._toggleItemText();};k.prototype.setValue=function(l){this._data.value=l;};k.prototype._toggleItemText=function(){var l=this._anchor;this._swap('markup','toggleMarkup');g.replace(l,this._renderItemContent());};k.prototype._swap=function(l,m){var n=this._data[l];this._data[l]=this._data[m];this._data[m]=n;};e.exports=k;});
__d("ButtonGroupX",["function-extensions","ArbiterMixin","copyProperties","mixin"],function(a,b,c,d,e,f){b('function-extensions');var g=b('ArbiterMixin'),h=b('copyProperties'),i=b('mixin'),j=i(g);for(var k in j)if(j.hasOwnProperty(k)&&k!=="_metaprototype")m[k]=j[k];var l=j===null?null:j.prototype;m.prototype=Object.create(l);m.prototype.constructor=m;m.__superConstructor__=j;function m(n,o){o=o||{};this._root=n;this._radioButtons=o.radioButtons||[];this._selected=o.selected;this.initButtonListeners();}m.prototype.initButtonListeners=function(){var n=this._radioButtons.length;while(n--){var o=this._radioButtons[n];o.subscribe('select',this.selectButton.bind(this,o));}};m.prototype.getSelected=function(){return this._selected;};m.prototype.getSelectedValue=function(){return this._selected?this._selected.getValue():null;};m.prototype.selectButton=function(n){if(this._selected!==n){this.setSelected(n);this.inform('change',{selected:n});}return this;};m.prototype.setSelected=function(n){if(this._selected!==n){if(this._selected)this._selected.setSelected(false);n.setSelected(true);this._selected=n;}return this;};m.prototype.setSelectedValue=function(n){var o=this._radioButtons.length;while(o--){var p=this._radioButtons[o];if(p.getValue()===n)return this.setSelected(p);}return this;};e.exports=m;});