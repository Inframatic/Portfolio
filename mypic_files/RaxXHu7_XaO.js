/*!CK:157494912!*//*1375666359,178146351*/

if (self.CavalryLogger) { CavalryLogger.start_js(["4kgAq"]); }

__d("AdsCurrency",["AdsCurrencyConfig"],function(a,b,c,d,e,f){var g=b('AdsCurrencyConfig').currencies;function h(n){if(g[n])return g[n].format;return null;}function i(n){if(g[n])return g[n].symbol;return null;}function j(n){if(g[n])return 1*g[n].offset;return 1;}function k(n){if(g[n])return g[n].name;return null;}var l=[];for(var m in g)if(g.hasOwnProperty(m))l.push(m);f.getFormat=h;f.getSymbol=i;f.getOffset=j;f.getName=k;f.currencyMapKeys=l;});
__d("ads-lib-formatters",["AdsCurrency"],function(a,b,c,d,e,f){var g=b('AdsCurrency'),h='USD';function i(t,u,v){t=t||'';v=v||'';u=typeof u==='undefined'?t.length:u;return t.length>u?(t.substr(0,u-v.length)+v):t;}function j(t,u){if(u===undefined||u===null)u='';return function(v){return !v?u:i(v,t,'...');};}function k(t,u,v,w){if(t==='N/A')return t;t=t||0;v=v||'';w=w||'.';t=u!==null?l(t,u):t+'';var x=t.split('.'),y=x[0],z=x[1],aa='',ba=/(\d)(\d\d\d)($|\D)/,ca='$1'+v+'$2$3';while((aa=y.replace(ba,ca))!=y)y=aa;var da=y;if(z)da+=w+z;return da;}function l(t,u){var v=Math.pow(10,u);t=Math.round(t*v)/v+'';if(!u)return t;var w=t.indexOf('.'),x=0;if(w==-1){t+='.';x=u;}else x=u-(t.length-w-1);for(var y=0,z=x;y<z;y++)t+='0';return t;}function m(t){return function(u){return k(u,t||0,',','.');};}function n(t,u){var v=u===false?1:100;return function(w){return k(w*v,t||0,',','.')+'%';};}var o={};function p(t,u,v){if(t===undefined)t=2;if(v===undefined)v=false;u=u||h;var w=u+'-'+t+'-'+v;if(!o[w]){var x=g.getFormat(u)||g.getFormat(h),y=g.getSymbol(u)||g.getSymbol(h),z=g.getOffset(u)||g.getOffset(h);x=x.replace('{symbol}',y);o[w]=function(aa){if(v)aa=aa/z;if(!(aa+'').match(/^\-?[\d\.,]*$/))return 'N/A';var ba=k(aa,t,',','.');return x.replace('{amount}',ba);};}return o[w];}function q(t){t=(t+'').trim().replace(/^[^\d]*\-/,'\u0002');if(!((/^\u0002?(\d+,\d*){2,}$/.test(t))||(/^\u0002?(\d+\.\d*){2,}$/.test(t))))t=t.replace(/[\.,](\d*\D*)$/,'\u0001$1');t=t.replace(/[^0-9\u0001\u0002]/g,'').replace('\u0001','.').replace('\u0002','-');return +t||0;}function r(){return function(t){return k(t,0,',','.')+'%';};}function s(t){var u=t.currency(),v=t.offset()==100?2:0;return p(v,u);}f.createTextTruncator=j;f.chopString=i;f.parseNumber=q;f.formatNumber=k;f.createNumberFormatter=m;f.createPercentFormatter=n;f.createMoneyFormatter=p;f.createMoneyFormatterForAccount=s;f.createInflationFormatter=r;});
__d("PopoverMenuShowOnHover",["Event"],function(a,b,c,d,e,f){var g=b('Event');function h(i){this._popoverMenu=i;this._listeners=[];}h.prototype.enable=function(){this._attachMouseListeners(this._popoverMenu.getTriggerElem());this._setMenuSubscription=this._popoverMenu.subscribe('setMenu',this._onSetMenu.bind(this));};h.prototype.disable=function(){while(this._listeners.length)this._listeners.pop().remove();if(this._setMenuSubscription){this._setMenuSubscription.unsubscribe();this._setMenuSubscription=null;}};h.prototype._onSetMenu=function(){this._attachMouseListeners(this._popoverMenu.getMenu().getRoot());};h.prototype._attachMouseListeners=function(i){var j=this._popoverMenu.getPopover();this._listeners.push(g.listen(i,'mouseenter',j.showLayer.bind(j)),g.listen(i,'mouseleave',j.hideLayer.bind(j)));};e.exports=h;});
__d("TriggerablePageletLoader",["function-extensions","CSS","Event","OnVisible","Run","UIPagelet","copyProperties"],function(a,b,c,d,e,f){b('function-extensions');var g=b('CSS'),h=b('Event'),i=b('OnVisible'),j=b('Run'),k=b('UIPagelet'),l=b('copyProperties'),m=[];function n(p){if(!m[p])return;m[p].__trigger&&m[p].__trigger.remove();delete m[p];}function o(p,q){this._disabledTriggerKeys=[];this._pageletConfig=p;this._loaded=false;this._loading=false;this._triggerKeys=[];if(q)q.forEach(this.addTrigger.bind(this));j.onLeave(this.destroy.bind(this));}o.prototype.addTrigger=function(p){p.__trigger=this._createTrigger(p);m.push(p);this._triggerKeys.push(m.length-1);};o.prototype.destroy=function(){this.removeTriggers();if(this._pageletRequest){this._pageletRequest.cancel();this._pageletRequest=null;this._loading=false;this._loaded=false;}};o.prototype.disableTriggers=function(){this._triggerKeys.forEach(function(p){if(m[p]){m[p].__trigger.remove();this._disabledTriggerKeys.push(p);}}.bind(this));};o.prototype.enableTriggers=function(){if(this._loaded||this._loading)return;this._disabledTriggerKeys.forEach(function(p){if(m[p])m[p].__trigger=this._createTrigger(m[p]);}.bind(this));this._disabledTriggerKeys.length=0;};o.prototype._createTrigger=function(p){if(this._loaded||this._loading)return;var q=this.onTrigger.bind(this,p);switch(p.type){case o.TRIGGER_CLICK:return h.listen(p.node,'click',function(r){r.prevent();q();});case o.TRIGGER_ONVISIBLE:return new i(p.node,q,p.onVisibleStrict,p.onVisibleBuffer);case o.TRIGGER_NOW:return q();default:}};o.prototype.load=function(p){if(this._loaded||this._loading)return;this._loading=true;this._loaded=false;g.addClass(this._pageletConfig.node,'async_saving');if(p&&p.node)g.addClass(p.node,'async_saving');var q=this._pageletConfig.options||{};q.displayCallback=this.onLoad.bind(this,p);if(q.crossPage===undefined)q.crossPage=true;this._pageletRequest=k.loadFromEndpoint(this._pageletConfig.controller,this._pageletConfig.node,this._pageletConfig.data,q);};o.prototype.onLoad=function(p,q){this._loaded=true;this._pageletRequest=null;g.removeClass(this._pageletConfig.node,'async_saving');if(p&&p.node)g.removeClass(p.node,'async_saving');if(this._pageletConfig.displayCallback){this._pageletConfig.displayCallback(q);}else q();};o.prototype.onTrigger=function(p){p.callback&&p.callback(p);if(!this._loaded&&!this._loading)this.load(p);};o.prototype.removeTriggers=function(p){this._triggerKeys.forEach(function(q){if(m[q]&&(!p||m[q].type===p))n(q);});};o.removeTrigger=function(p){for(var q in m)if(m[q]&&m[q].node===p)n(q);};l(o,{TRIGGER_CLICK:'click',TRIGGER_ONVISIBLE:'onvisible',TRIGGER_NOW:'now'});e.exports=o;});
__d("OGCollectionAddDialog",["AsyncRequest","DataStore","DOMQuery","Form","MenuDeprecated","URI","collectDataAttributes","copyProperties","csx","tidyEvent"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('DataStore'),i=b('DOMQuery'),j=b('Form'),k=b('MenuDeprecated'),l=b('URI'),m=b('collectDataAttributes'),n=b('copyProperties'),o=b('csx'),p=b('tidyEvent'),q='OGCollectionAddDialog';function r(s,t,u,v,w){this._dialog=s;this._surface=t;this._endpoint=l(v);this._loadEditMenu=w.loadEditMenu;this._listener=h.get(String(u),q);this._audienceSelector=i.find(this._dialog.getContent(),'.audienceSelector');this._menu=i.find(this._dialog.getContent(),"._4-jt");k.register(this._menu);this._menuSubscriptionToken=k.subscribe('select',this._onMenuClick.bind(this));p([this._dialog.subscribe('show',this._onDialogShow.bind(this)),this._dialog.subscribe('hide',this._onDialogHide.bind(this))]);this._dialog.show();}n(r,{INSTANCE_KEY:q});n(r.prototype,{_onDialogShow:function(){this._listener.onDialogShow(this._dialog);},_onDialogHide:function(){this._destroy();},_onMenuClick:function(s,t){if(t.menu!==this._menu)return;var u=t.item;this._listener.onMenuClick(u);var v=i.find(u,"._5581"),w=v.getAttribute('value');this._submitRequest(w);},_submitRequest:function(s){this._endpoint.addQueryData({collection_token:s});this._dialog.hide();this._request=new g(this._endpoint).setData(n(j.serialize(this._audienceSelector),{action:'add',load_edit_menu:this._loadEditMenu,surface:this._surface},m(this._dialog.getContext(),['ft'])));this._request.send();},_destroy:function(){this._listener.onDialogHide();k.unsubscribe(this._menuSubscriptionToken);}});e.exports=r;});
__d("OGCollectionAddMenu",["CSS","DataStore","DOM","DOMQuery","Event","OGCollectionAddDialog","Parent","TidyArbiterMixin","copyProperties","csx","cx","ge","tidyEvent"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DataStore'),i=b('DOM'),j=b('DOMQuery'),k=b('Event'),l=b('OGCollectionAddDialog'),m=b('Parent'),n=b('TidyArbiterMixin'),o=b('copyProperties'),p=b('csx'),q=b('cx'),r=b('ge'),s=b('tidyEvent');function t(u,v,w,x,y,z){this._image=v;this._container=w;this._placeholder=x;this._surface=y;this._rateControl=i.scry(this._container.parentNode,"._5586")[0];t.inform('addButton',{button:this._image,root:this._container});s(k.listen(this._container,'click',function(aa){var ba=m.byClass(aa.getTarget(),"_5859");if(this.isDialogShowing()&&ba)aa.kill();}.bind(this)));if(this._surface==='friend_timeline_lhc')this._handleAlwaysVisibleLHC();h.set(String(u),l.INSTANCE_KEY,this);}o(t,n,{initCallout:function(u,v,w){u.show();var x=r(v),y=j.find(w,"._5dxr");s(k.listen(x,'click',function(z){k.fire(y,'click');}));}});o(t.prototype,n,{destroy:function(){i.remove(this._container);this._placeholder.destroy();},hide:function(){g.hide(this._image);this._placeholder.hide();},getParent:function(){return this._container.parentNode;},insertMenuIntoDialog:function(u){this._placeholder.insertIntoDialog(u);},onMenuClick:function(u){var v=j.find(u,"._5582");this._showRate=this._rateControl&&v.getAttribute('value');g.hide(this._image);if(this._showRate){g.show(this._rateControl);k.fire(this._rateControl,'click');}else g.show(this._placeholder.getIcon());},onDialogShow:function(u){var v=j.find(u.getContent(),'.audienceSelector');g.addClass(this._image,'openToggler');t.inform('menuOpened',{audienceSelector:v.parentNode});this._dialogShowing=true;},onDialogHide:function(){g.removeClass(this._image,'openToggler');this._dialogShowing=false;},isDialogShowing:function(){return this._dialogShowing;},_handleAlwaysVisibleLHC:function(){var u=m.byClass(this._container,"_4_ij"),v=m.byClass(u,"_5-r");if(g.hasClass(u,"_58v0"))s([this._alwaysVisibleToken=k.listen(v,'mouseenter',function(){g.removeClass(u,"_58v0");this._alwaysVisibleToken.remove();}.bind(this))]);}});e.exports=t;});
__d("MedleyPageletRequestData",["Arbiter","TidyArbiter"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('TidyArbiter'),i={},j={get:function(){return i;},set:function(k){i=k;h.inform('Medley/requestDataSet',null,g.BEHAVIOR_STATE);}};e.exports=j;});
__d("TimelineDynamicSection",["DOM","TimelineSection","cx","ge","TimelineDynamicSectionConfig"],function(a,b,c,d,e,f){var g=b('DOM'),h=b('TimelineSection'),i=b('cx'),j=b('ge'),k=b('TimelineDynamicSectionConfig');for(var l in h)if(h.hasOwnProperty(l)&&l!=="_metaprototype")n[l]=h[l];var m=h===null?null:h.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=h;function n(o,p,q){this._controller=p;this._data=null;this._node=null;this._triggerLoader=null;h.call(this,o,o,q);}n.prototype._createNode=function(){return g.create('div',{className:"_30f",id:this.nodeID},[k.throbber.cloneNode(true)]);};n.prototype.getNode=function(){if(!this._node)this._node=j(this.nodeID)||this._createNode();return this._node;};e.exports=n;});
__d("TimelineAppCollection",["function-extensions","Class","CSS","DOM","DOMQuery","Event","MedleyPageletRequestData","NumberFormatConfig","PageTransitions","Parent","Style","TidyArbiter","TidyArbiterMixin","TimelineDynamicSection","TimelineSection","TriggerablePageletLoader","classWithMixins","mixin","TimelineDynamicSectionConfig","copyProperties","csx","cx","ads-lib-formatters","ge"],function(a,b,c,d,e,f){b('function-extensions');var g=b('Class'),h=b('CSS'),i=b('DOM'),j=b('DOMQuery'),k=b('Event'),l=b('MedleyPageletRequestData'),m=b('NumberFormatConfig'),n=b('PageTransitions'),o=b('Parent'),p=b('Style'),q=b('TidyArbiter'),r=b('TidyArbiterMixin'),s=b('TimelineDynamicSection'),t=b('TimelineSection'),u=b('TriggerablePageletLoader'),v=b('classWithMixins'),w=b('mixin'),x=b('TimelineDynamicSectionConfig'),y=b('copyProperties'),z=b('csx'),aa=b('cx'),ba=b('ads-lib-formatters'),ca=b('ge'),da=500,ea=8;function fa(ma){var na=ca(la.getIDByToken(ma));if(!na)return;return i.scry(na,"._620")[0];}function ga(ma,na){na&&!na.isDefaultRequested()&&na.prevent();var oa=ma._parentSection,pa=oa._parentSection;t.setActiveSectionID(oa.id);oa.setActiveCollection(ma);if(oa._sk===pa._sk){if(!h.hasClass(pa.getNode(),"_c4f")){h.addClass(pa.getNode(),"_c4f");pa.freezeChildren();}ma._isFullyLoaded&&pa.addSectionTeasers();}if(!pa.isMedleyView()&&oa._sk===pa._sk){var qa=ma.href;n.rewriteCurrentURI(n.getCurrentURI().getUnqualifiedURI(),qa);}}function ha(ma,na){na.data.overview=ma._parentSection._sk!==ma._parentSection._parentSection._sk;na.data.cursor=null;ga(ma);}var ia=v(s,w(r));for(var ja in ia)if(ia.hasOwnProperty(ja)&&ja!=="_metaprototype")la[ja]=ia[ja];var ka=ia===null?null:ia.prototype;la.prototype=Object.create(ka);la.prototype.constructor=la;la.__superConstructor__=ia;function la(ma,na,oa,pa,qa,ra){this._contentLoader=null;this._isFrozen=false;this._isFullyLoaded=false;this._cursor=0;this._tabNode=oa;this._tabCount=pa>0?pa:0;this._token=ma;this._ftid=null;this.auxContent=null;this.curationContent=null;this._order=qa;this.href=ra;this._sortContent=null;this.refreshCount();ia.call(this,la.getIDByToken(ma),na);if(!oa)return;if(ca(this.nodeID)){k.listen(oa,'click',ga.curry(this));}else this.createTriggerLoader.bind(this).defer();}la.prototype.addContentLoader=function(ma,na){this._cursor=na;q.subscribe('Medley/requestDataSet',function(){var oa={node:ma};if(h.hasClass(ma,"_3t3")){oa.type=u.TRIGGER_CLICK;}else if(this._isFrozen){i.remove(ma);oa.node=x.pager.cloneNode(true);i.appendContent(this.getNode(),oa.node);oa.type=u.TRIGGER_CLICK;}else{oa.onVisibleBuffer=da;oa.onVisibleStrict=true;oa.type=u.TRIGGER_ONVISIBLE;}if(oa.type===u.TRIGGER_CLICK)oa.callback=t.setActiveSectionID.curry(this.id);var pa=y({displayCallback:function(qa){i.remove(oa.node);qa();},options:{append:true}},this.getDefaultPageletConfig());pa.data.overview=this.isOverview();this._triggerLoader=null;this._contentLoader=new u(pa,[oa]);}.bind(this));};la.prototype._createNode=function(){var ma=ka._createNode.call(this);ma.setAttribute('aria-role','tabpanel');return ma;};la.prototype.createTriggerLoader=function(){q.subscribe('Medley/requestDataSet',function(){var ma=this.getDefaultPageletConfig(),na={callback:ha.curry(this,ma),node:this._tabNode,type:u.TRIGGER_CLICK};this._triggerLoader=new u(ma,[na]);}.bind(this));};la.prototype.disableContentLoader=function(){this._contentLoader&&this._contentLoader.disableTriggers();};la.prototype.enableContentLoader=function(){var ma=this._triggerLoader||this._contentLoader;ma&&ma.enableTriggers();};la.prototype.freeze=function(){this._isFrozen=true;if(!this._contentLoader||this._contentLoader._loading)return;this._contentLoader.removeTriggers(u.TRIGGER_ONVISIBLE);var ma=j.scry(this.getNode(),"._3t3");if(!ma.length){var na=j.scry(this.getNode(),"._359")[0];na.length&&this.addContentLoader(na,this._cursor);}};la.prototype.getCount=function(){return this._tabCount;};la.prototype.getDefaultPageletConfig=function(){return {controller:this._controller,data:y({collection_token:this._token,cursor:this._cursor},l.get(),{ftid:this._ftid,order:this._order},{sk:this._parentSection._sk}),node:this.getNode()};};la.prototype.getMedleySiteKey=function(){return this._parentSection._parentSection._sk;};la.prototype.flashCountIf=function(){if(this._parentSection.getActiveCollection()!=this){h.addClass(this._tabNode,"_4-k9");setTimeout(h.removeClass.curry(this._tabNode,"_4-k9"),800);}};la.prototype.isOverview=function(){return this._parentSection._sk!=this._parentSection._parentSection._sk;};la.prototype.registerAuxContent=function(ma){this.auxContent=ma;if(ma.nodeType==11)this.auxContent=i.create('span',null,ma);if(this._parentSection._activeCollection!==this)h.hide(this.auxContent);this._parentSection.addAuxContent(this.auxContent);};la.prototype.registerAddCurationContent=function(ma,na,oa){if(this.curationContent)return;this.curationContent=(ma.nodeType==11)?i.create('span',null,ma):ma;this.curationContentState=na;this._parentSection.addCurationContent(this.curationContent,this,oa);};la.prototype.nullStateCurationContent=function(){this._parentSection.nullStateCurationContent();};la.prototype.registerSortContent=function(ma,na){this._sortContent&&i.remove(this._sortContent);this._sortContent=ma;na.subscribeOnce('change',function(oa,pa){i.setContent(i.find(ma,"._57oy"),pa.label);this._sort(pa.value);}.bind(this));};la.prototype.refreshCount=function(){if(!this._tabNode)return;var ma=j.find(this._tabNode,"._3d0");if(this._tabCount>0){i.setContent(ma,ba.formatNumber(this._tabCount,0,m.numberDelimiter,''));}else i.setContent(ma,'');};la.prototype._resetContent=function(){this._contentLoader&&this._contentLoader.destroy();i.remove(this.getNode());this._node=null;i.appendContent(j.find(this._parentSection.getNode(),"div._3i9"),this.getNode());this.addContentLoader(j.find(this.getNode(),"._359"),0);};la.prototype.setFTID=function(ma){this._ftid=ma;};la.prototype._sort=function(ma){this._order=ma;this._resetContent();var na=this._parentSection,oa=na._parentSection;if(!oa.isMedleyView()&&na._sk===oa._sk){var pa=n.getCurrentURI();pa.addQueryData({order:this._order});n.rewriteCurrentURI(n.getCurrentURI().getUnqualifiedURI(),pa);}};la.prototype.thaw=function(){this._isFrozen=false;};la.prototype.getToken=function(){return this._token;};la.addPlaceholderToCollection=function(ma,na,oa){oa=typeof oa!=='undefined'?oa:{};if(!oa.suppressCount)this.incrementCount(la.getIDByToken(ma));t.callWithSection(la.getIDByToken(ma),function(pa){var qa=i.scry(na,"._gx7")[0].cloneNode(true),ra=i.scry(na,"._gx8 .img")[0],sa=i.scry(na,"._3owb")[0],ta=sa&&sa.getAttribute('data-obj');if(!qa||!ta)return;pa.inform(la.ADDING_PLACEHOLDER);var ua=fa(ma);if(!ua)return;var va=i.scry(ua,'[data-obj="'+ta+'"]')[0],wa=i.create('div',{className:"_4-he"});if(ra)p.set(wa,'background-image','url('+ra.src+')');var xa=i.create('div',{className:"_gx8"},[wa]),ya=i.create('div',{className:"_gx6"},[qa]),za=i.create('div',{className:"_3owb"},[xa,ya]),ab=i.create('li',{className:"_5rz",id:'collectionItemPlaceholder'+ta},[za]);if(va&&oa.replaceExistingElement){i.replace(va.parentNode,ab);}else{if(va){i.remove(va.parentNode);}else if(pa.isOverview()&&ua.children.length>=ea)h.addClass(ua.children[ea-1],"_51k9");i.prependContent(ua,ab);}});};la.replaceItem=function(ma,na,oa){var pa=o.byClass(ma,"_620"),qa=i.scry(pa,'div[data-obj="'+na+'"]')[0];if(qa){la.inform(la.NEW_ITEM,{grid:pa,newItem:oa});i.replace(qa.parentNode,oa);}};la.addItemToCollection=function(ma,na,oa){var pa=ca(oa);if(!pa)return;var qa=i.scry(pa,"._620")[0],ra=qa.parentNode.nextSibling;if(ra&&h.hasClass(ra,"_3t3"))i.remove(qa.lastChild);this.inform(la.NEW_ITEM,{grid:qa,newItem:ma});var sa=ca('collectionItemPlaceholder'+na);if(sa){i.replace(sa,ma);return;}i.prependContent(qa,ma);};la.createFromArray=function(ma){return ma.map(function(na){return new la(na.token,na.controller,na.tab_node,na.tab_count,na.order,na.href);});};la.decrementCount=function(ma){t.callWithSection(ma,function(na){if(na._tabCount>0){na._tabCount--;na.refreshCount();na.flashCountIf();}});};la.enableContentLoader=function(ma,na,oa){t.callWithSection(ma,function(pa){pa.addContentLoader(na,oa);});};la.getIDByToken=function(ma){return 'pagelet_timeline_app_collection_'+ma;};la.incrementCount=function(ma){t.callWithSection(ma,function(na){na._tabCount++;na.refreshCount();na.flashCountIf();});};la.registerAuxContent=function(ma,na){t.callWithSection(ma,function(oa){oa.registerAuxContent(na);});};la.registerAddCurationContent=function(ma,na,oa,pa){t.callWithSection(ma,function(qa){qa.registerAddCurationContent(na,oa,pa);});};la.registerSortContent=function(ma,na,oa){t.callWithSection(ma,function(pa){pa.registerSortContent(na,oa);});};la.setLoaded=function(ma){t.callWithSection(ma,function(na){na.setIsLoaded(true);na._parentSection.inform('loaded',na);na._parentSection.unsetMinHeight();});};la.setFullyLoaded=function(ma){t.callWithSection(ma,function(na){na._isFullyLoaded=true;var oa=na._parentSection;oa._sk===oa._parentSection._sk&&oa._parentSection.addSectionTeasers();});};la.setFTID=function(ma,na){t.callWithSection(ma,function(oa){oa.setFTID(na);});};la.switchToNullStateCurationContent=function(ma){t.callWithSection(la.getIDByToken(ma),function(na){na.nullStateCurationContent();});};y(la,r,{NEW_ITEM:'TimelineAppCollection/newItem',ADDING_PLACEHOLDER:'TimelineAppCollection/addingPlaceholder'});e.exports=la;});
__d("TimelineAppSectionCuration",["Animation","AppSectionCurationState","Arbiter","AsyncSignal","CSS","DOM","Ease","Event","OnVisible","Parent","Style","TidyArbiterMixin","TimelineSection","copyProperties","cx","queryThenMutateDOM","tidyEvent"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('AppSectionCurationState'),i=b('Arbiter'),j=b('AsyncSignal'),k=b('CSS'),l=b('DOM'),m=b('Ease'),n=b('Event'),o=b('OnVisible'),p=b('Parent'),q=b('Style'),r=b('TidyArbiterMixin'),s=b('TimelineSection'),t=b('copyProperties'),u=b('cx'),v=b('queryThenMutateDOM'),w=b('tidyEvent'),x=0,y={},z={};function aa(fa,ga,ha){var ia,ja,ka=(ga!=h.hide)&&(ha!=h.hide);v(function(){ja=fa.offsetHeight;ia=ga===h.hide?0:fa.firstChild.offsetHeight;},function(){q.set(fa,'height',ja+'px');q.set(fa,'overflow','hidden');ia&&k.addClass(fa.parentNode,"_52bu");o.checkBuffer.defer();var la=l.getID(fa);z[la]&&z[la].stop();z[la]=new g(fa).to('height',ia).ondone(function(){delete z[la];if(ia){q.set(fa,'overflow','');q.set(fa.parentNode,'overflow','');}!ia&&k.removeClass(fa.parentNode,"_52bu");i.inform('reflow');}).duration(Math.abs(ia-ja)*(ka?5:1.5)).ease(m.sineOut).go();});}function ba(fa,ga){if(fa){k.show(ga);k.hide(fa);}}function ca(fa,ga){if(fa){k.show(fa);k.hide(ga);}}function da(fa,ga){s.callWithSection(fa,function(ha){new j('/ajax/timeline/collections/app_recs/',{collection_token:ha.getActiveCollection().getToken(),event_type:ga}).send();});}var ea=t({addSection:function(fa,ga,ha){y[fa]={appClickLogged:false,buttons:ga,content:ha,id:fa,state:h.hide};q.set(ha,'height','0px');q.set(ha,'overflow','hidden');k.show(ha);for(var ia in ga)w([n.listen(ga[ia].hide_button,'click',ea.informState.curry(h.hide,fa)),n.listen(ga[ia].show_button,'click',ea.informState.curry(ia,fa))]);ea.register(fa,function(ja,ka,la,ma){new o(ha,aa.curry(ha,ja,ma),true,x);for(var na in ga)ca(ga[na].show_button,ga[na].hide_button);if(ga[ja])ba(ga[ja].show_button,ga[ja].hide_button);});},informState:function(fa,ga){if(y[ga]&&y[ga].state!==fa){if(fa===h.showApps&&!y[ga].appClickLogged){y[ga].appClickLogged=true;da(ga,'add_apps_click');}var ha=y[ga].state;y[ga].state=fa;ea.inform(fa,{obj:y[ga],oldState:ha});}},refreshState:function(fa,ga){ea.inform(fa,{obj:y[ga],oldState:fa});},linkContent:function(fa,ga,ha){var ia=y[fa].buttons[h.showApps].show_button;k.show(p.byClass(ia,'hidden_elem'));new o(ia,function(){if(Math.floor(Math.random()*100)===0)da(fa,'add_apps_imp');},true,x);ea.register(fa,function(ja,ka,la,ma){if(ja==h.showItems){if(ma==h.showApps)q.set(y[fa].content.parentNode,'overflow','hidden');k.show(ga);k.hide(ha);}else if(ja==h.showApps){k.hide(ga);k.show(ha);}});},register:function(fa,ga){var ha=ea.subscribe([h.hide,h.showItems,h.showApps],function(ia,ja){if(ja.obj.id===fa)ga(ia,ja.obj,ha,ja.oldState);});},getSectionState:function(fa){if(y[fa])return y[fa].state;}},r);e.exports=ea;});
__d("TimelineMonitor",["Arbiter","Event","Run","Vector","ViewportBounds","ge","queryThenMutateDOM"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Event'),i=b('Run'),j=b('Vector'),k=b('ViewportBounds'),l=b('ge'),m=b('queryThenMutateDOM'),n={},o={},p=0,q=[],r=null,s=false;function t(){n={};o={};p=0;q.length=0;r&&r.remove();r=null;s=false;}function u(){if(!r)r=h.listen(window,'scroll',z);if(!s){i.onLeave(t);s=true;}z();}var v=[],w=[];function x(){q.forEach(function(ea){var fa=aa.getSection(ea);if(fa&&fa!==o[ea.id]){o[ea.id]=fa;v.push({section:fa});}});var ba=k.getTop()+j.getScrollPosition().y;for(var ca in n){var da=n[ca];if((ba>=da.boundary&&p<=da.boundary)||(ba<=da.boundary&&p>=da.boundary)){n[ca].fromAbove=p<ba;w.push(n[ca]);}}p=ba;}function y(){v.forEach(function(ba){g.inform(aa.SECTION_CHANGE,ba);});w.forEach(function(ba){g.inform(aa.BOUNDARY_PASSED,ba);});v.length=0;w.length=0;}function z(){m(x,y,'TimelineMonitor/scroll');}var aa={BOUNDARY_PASSED:'TimelineMonitor/boundary',SECTION_CHANGE:'TimelineMonitor/change',getSection:function(ba){var ca=k.getTop()+j.getScrollPosition().y,da=ba.childSections.getHead();while(da){if(l(da.nodeID)&&ca<j.getElementPosition(da.getNode()).y+j.getElementDimensions(da.getNode()).y)return da;da=da.getNext();}},monitorBoundary:function(ba,ca){ca=ca||ba;if(!n[ca]||n[ca].boundary!==ba){n[ca]={boundary:ba,id:ca};u();}},monitorSection:function(ba){o[ba.id]=null;q.push(ba);u();return aa.getSection(ba);},poke:function(ba){z();}};e.exports=aa;});
__d("TimelineAppSection",["AppSectionCurationState","Arbiter","CSS","DOM","DOMQuery","DOMScroll","JSLogger","MedleyPageletRequestData","PageletSet","Style","TidyArbiter","TidyArbiterMixin","TimelineAppCollection","TimelineAppSectionCuration","TimelineDynamicSection","TimelineMonitor","TimelineSection","TimelineSmartInsert","TriggerablePageletLoader","ViewportBounds","copyProperties","csx","cx","ge","tx","mixin","classWithMixins"],function(a,b,c,d,e,f){var g=b('AppSectionCurationState'),h=b('Arbiter'),i=b('CSS'),j=b('DOM'),k=b('DOMQuery'),l=b('DOMScroll'),m=b('JSLogger'),n=b('MedleyPageletRequestData'),o=b('PageletSet'),p=b('Style'),q=b('TidyArbiter'),r=b('TidyArbiterMixin'),s=b('TimelineAppCollection'),t=b('TimelineAppSectionCuration'),u=b('TimelineDynamicSection'),v=b('TimelineMonitor'),w=b('TimelineSection'),x=b('TimelineSmartInsert'),y=b('TriggerablePageletLoader'),z=b('ViewportBounds'),aa=b('copyProperties'),ba=b('csx'),ca=b('cx'),da=b('ge'),ea=b('tx'),fa=500,ga=2,ha=500,ia=18,ja="_5bry",ka="_3s-",la=j.create('div',{className:"_3s_"}),ma=b("mixin"),na=b("classWithMixins");function oa(){return j.create('span',{className:"_3s18"},[j.create('a',{className:"_3s19",href:'#'},"More"),j.create('span',{className:"_3s1a"})]);}var pa=m.create('collections'),qa={notes:295,events:345,photos:555,app_quoraapp:569,friends:603,app_foodspotting:621,map:621,favorites:645,app_pinterestapp:699,app_instapp:699,books:699,movies:699,tv:699,music:725};function ra(wa){return qa[wa.replace('pagelet_timeline_medley_','')];}var sa=na(u,ma(r));for(var ta in sa)if(sa.hasOwnProperty(ta)&&ta!=="_metaprototype")va[ta]=sa[ta];var ua=sa===null?null:sa.prototype;va.prototype=Object.create(ua);va.prototype.constructor=va;va.__superConstructor__=sa;function va(wa,xa,ya,za){sa.call(this,va.getIDBySK(xa),wa,ya);this._sk=xa;this._title=za;}va.prototype._createNode=function(){var wa=ua._createNode.call(this);wa.setAttribute('aria-labelledby','medley_header_'+this._sk);wa.setAttribute('aria-role','region');j.prependContent(wa,j.create('div',{className:"_3cz"},[this._title,j.create('div',{className:"_3dc",'aria-role':'tablist'})]));this.resetMinHeight(wa);return wa;};va.prototype.addAuxContent=function(wa){var xa=k.scry(this.getNode(),"._6ph")[0];xa&&j.appendContent(xa,wa);this._activeCollection&&this._checkTabDimensions(this._activeCollection);};va.prototype.nullStateCurationContent=function(){if(!this._nullStateContent)return;var wa=k.find(this.getNode(),"._1_cb");j.replace(wa.firstChild,this._nullStateContent);};va.prototype.addCurationContent=function(wa,xa,ya){var za=k.scry(this.getNode(),"._1_cb")[0];za&&j.appendContent(za,wa);if(ya)this._nullStateContent=ya;var ab=k.scry(za,"._5b8g")[0];if(ab)j.remove(ab);this._checkCurationContent(xa);};va.prototype.createTriggerLoader=function(wa){var xa=function(ya){this._parentSection._lastLoadedSection=this;this.setIsLoaded(true);x.enable();x.run(this.getNode(),function(){ya();this.unsetMinHeight();v.poke(this._parentSection.id);}.bind(this),'viewport');}.bind(this);q.subscribe('Medley/requestDataSet',function(){this._triggerLoader=new y({controller:this._controller,data:this.getData(),displayCallback:xa,options:{constHeight:true},node:this.getNode()},[{node:this.getNode(),onVisibleBuffer:fa,onVisibleStrict:true,type:wa?y.TRIGGER_NOW:y.TRIGGER_ONVISIBLE}]);}.bind(this));};va.prototype.freeze=function(){i.addClass(this.getNode(),"_c4e");if(da(this.nodeID)&&!this.isLoaded())this._triggerLoader&&this._triggerLoader.disableTriggers();this.freezeChildren();};va.prototype.getData=function(){if(!this._data)this._data=aa({sk:this._sk},n.get(),{overview:this._parentSection._sk!==this._sk});return this._data;};va.prototype.getActiveCollection=function(){return this._activeCollection;};va.prototype.remove=function(){if(o.hasPagelet(this.id))o.removePagelet(this.id);j.remove(this.getNode());this._parentSection.childSections.remove(this.id);};va.prototype.setActiveCollection=function(wa){if(this._activeCollection===wa||!wa._tabNode)return;if(this._activeCollection){h.inform('TimelineSideAds/refresh');pa.log('change_collection',{previous_collection:this._activeCollection.getToken(),new_collection:wa.getToken()});this.resetMinHeight();this._activeCollection.disableContentLoader();i.hide(this._activeCollection.getNode());i.removeClass(this._activeCollection._tabNode,ka);j.scry(this._activeCollection._tabNode,"div._3s_").forEach(j.remove);j.appendContent(wa._tabNode,la.cloneNode(true));this._activeCollection.auxContent&&i.hide(this._activeCollection.auxContent);this._activeCollection.curationContent&&i.hide(this._activeCollection.curationContent);this._activeCollection._tabNode.setAttribute('aria-selected','false');}wa.auxContent&&i.show(wa.auxContent);this._checkCurationContent(wa);i.addClass(wa._tabNode,ka);this._checkTabDimensions(wa);this._activeCollection=wa;va.inform('changeCollection');if(!da(wa.nodeID))j.appendContent(k.find(this.getNode(),"div._3i9"),wa.getNode());i.show(wa.getNode());wa.isLoaded()&&this.unsetMinHeight();wa._tabNode.setAttribute('aria-selected','true');wa.enableContentLoader();};va.prototype.resetMinHeight=function(wa){wa||(wa=this.getNode());var xa=ra(this.id)||wa.offsetHeight-ga;xa>0&&this._updateScrollAfterHeight(wa,xa);};va.prototype.scrollTo=function(wa,xa){var ya=z.getElementPosition(this.getNode());ya.y-=wa||ia;xa&&this._parentSection.toggleScrollLoad(false);l.scrollTo(ya,ha,null,null,function(){ya=z.getElementPosition(this.getNode());ya.y-=wa||ia;l.scrollTo(ya);xa&&this._parentSection.toggleScrollLoad(true);}.bind(this));};va.prototype.thaw=function(){i.removeClass(this.getNode(),"_c4e");this._triggerLoader&&this._triggerLoader.enableTriggers();this.thawChildren();};va.prototype.unsetMinHeight=function(){this._updateScrollAfterHeight(this.getNode(),0);};va.prototype._updateScrollAfterHeight=function(wa,xa){p.set(wa,'min-height',xa+'px');h.inform('reflow');};va.prototype._checkCurationContent=function(wa){var xa=k.scry(this.getNode(),"._2zh3")[0];if(xa){i.conditionShow(xa,wa.curationContent);if(wa.curationContent){i.show(wa.curationContent);if(wa.curationContentState)t.informState(wa.curationContentState,this.id);}else t.informState(g.hide,this.id,g.showItems);}};va.prototype._getTabObj=function(){if(!this._tabObj){this._tabObj={aux:j.find(this.getNode(),"._6ph"),items:[],nav:j.find(this.getNode(),"._1_ca"),tabs:j.find(this.getNode(),"._3dc"),width:0};i.addClass(this._tabObj.tabs,"_5brz");}return this._tabObj;};va.prototype._checkTabDimensions=function(wa){var xa=this._getTabObj(),ya=xa.nav.offsetWidth-xa.aux.offsetWidth;if(ya>=xa.width){if(!xa.hidden&&ya-xa.tabs.offsetWidth>=0)return;i.removeClass(xa.tabs,ja);}if(xa.hidden&&wa._tabNode.parentNode===xa.overflow){j.prependContent(xa.overflow,xa.dropdown.previousSibling);j.insertBefore(xa.dropdown,wa._tabNode);}if(ya-xa.tabs.offsetWidth>=0&&!xa.hidden)return;var za=xa.items.length;if(za&&xa.hidden){for(var ab=0;ab<za;ab++)j.appendContent(xa.tabs,xa.items[ab]);j.remove(xa.dropdown);}i.conditionClass(xa.tabs,ja,ya-xa.tabs.offsetWidth<0);xa.width=ya;xa.hidden=0;if(ya-xa.tabs.offsetWidth>=0)return;if(!xa.dropdown){xa.dropdown=oa();xa.overflow=j.find(xa.dropdown,"._3s1a");xa.items=j.scry(this.getNode(),"._3c_");za=xa.items.length;}j.appendContent(xa.tabs,xa.dropdown);var bb=0;for(ab=za-1;ab>0&&bb<=0;ab--)if(xa.items[ab]!==wa._tabNode){j.prependContent(xa.overflow,xa.items[ab]);bb=ya-xa.tabs.offsetWidth;xa.hidden++;}};va.createFromArray=function(wa){return wa.map(function(xa){return new va(xa.controller,xa.sk,xa.label,xa.title);});};va.getIDBySK=function(wa){return 'pagelet_timeline_medley_'+wa;};va.registerCollections=function(wa,xa,ya){w.callWithSection(va.getIDBySK(wa),function(za){s.createFromArray(xa).forEach(za.appendSection.bind(za));var ab=za.childSections.get(ya);za.setActiveCollection(ab);ab.setIsLoaded(true);});};va.removeEmptyAppSection=function(wa){w.callWithSection(va.getIDBySK(wa),function(xa){xa.remove();});};aa(va,r);e.exports=va;});
__d("TimelineDrag",["ArbiterMixin","Event","Locale","Style","Vector","mixin"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('Event'),i=b('Locale'),j=b('Style'),k=b('Vector'),l=b('mixin'),m=l(g);for(var n in m)if(m.hasOwnProperty(n)&&n!=="_metaprototype")p[n]=m[n];var o=m===null?null:m.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=m;function p(q,r,s){s=s||{};this._listenOn=s.listenOn;this._offsetInput=r;this._defaultOffset=s.default_offset;this._killClicks=s.killClicks;this._vertical=true;this._RTLXSwitch=false;this.setPicture(q,s);}p.prototype.setPicture=function(q,r){if(!q)return false;r=r||{};this._picture=q;this._defaultOffset=r.default_offset;if(r.offsetInput)this._offsetInput=r.offsetInput;if(r.vertical!==undefined)this._vertical=r.vertical;if(r.height)this._containerHeight=r.height;if(r.width)this._containerWidth=r.width;if(this._vertical){this._offsetType='top';this._eventCoord='y';}else{this._RTLXSwitch=i.isRTL();this._offsetType='left';this._eventCoord='x';}if(this._picture.complete){this._initialLoad();}else this._loadListener=h.listen(this._picture,'load',function(){this._loadListener.remove();this._initialLoad();}.bind(this));};p.prototype.destroy=function(){this._stopDrag();this._saveOffset();this._mousedown&&this._mousedown.remove();this._onclick&&this._onclick.remove();this._loadListener&&this._loadListener.remove();};p.prototype._initialLoad=function(){var q=this._listenOn?this._listenOn:this._picture;this._mousedown&&this._mousedown.remove();this._mousedown=h.listen(q,'mousedown',this._onMouseDown.bind(this));if(this._vertical){this._maxOffset=this._containerHeight-this._picture.offsetHeight;}else this._maxOffset=this._containerWidth-this._picture.offsetWidth;if(this._defaultOffset!==undefined)this._setOffset(this._defaultOffset);this._onclick&&this._onclick.remove();if(this._killClicks)this._onclick=h.listen(q,'click',this._onClick.bind(this));this._saveOffset();};p.prototype._onClick=function(event){event.kill();};p.prototype._onMouseDown=function(event){var q=parseInt(j.get(this._picture,this._offsetType),10)||0;this._pictureStartDragOffset=q-k.getEventPosition(event)[this._eventCoord];this._startDrag();event.kill();};p.prototype._startDrag=function(){if(!this._dragStarted){this.inform('startdrag',this);this._dragTokens=[h.listen(document.documentElement,'mouseup',this._onMouseUp.bind(this)),h.listen(document.documentElement,'mousemove',this._onMouseMove.bind(this))];this._dragStarted=true;}};p.prototype._saveOffset=function(){var q=parseInt(j.get(this._picture,this._offsetType),10);if(this._RTLXSwitch){this._offsetInput.value=q+this._containerWidth-this._picture.offsetWidth;}else this._offsetInput.value=q;};p.prototype._stopDrag=function(){if(this._dragStarted){this.inform('stopdrag',this);this._dragStarted=false;this._dragTokens.forEach(function(q){q.remove();});this._saveOffset();}};p.prototype._onMouseUp=function(event){this._stopDrag();event.kill();};p.prototype._setOffset=function(q){if(this._RTLXSwitch){q=Math.max(0,Math.min(q,-this._maxOffset));}else q=Math.min(0,Math.max(q,this._maxOffset));j.set(this._picture,this._offsetType,q+'px');};p.prototype._onMouseMove=function(event){this._setOffset(this._pictureStartDragOffset+k.getEventPosition(event)[this._eventCoord]);event.kill();};e.exports=p;});
__d("TimelineCover",["Arbiter","Button","CSS","DOM","DOMScroll","HTML","Parent","Style","TimelineController","TimelineDrag","Vector","$","cx","ge"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('Button'),i=b('CSS'),j=b('DOM'),k=b('DOMScroll'),l=b('HTML'),m=b('Parent'),n=b('Style'),o=b('TimelineController'),p=b('TimelineDrag'),q=b('Vector'),r=b('$'),s=b('cx'),t=b('ge');function u(v,w,x){this.root=r('fbProfileCover');if(typeof w==='object'){this._coverHeight=w.cover_height;this._coverWidth=w.cover_width;this.previewing=w.previewing;this._isLegacy=false;}else{this._isLegacy=true;this._coverHeight=w;this.previewing=x;}this._parentSection=m.byClass(this.root,'fbTimelineSection');this.cover=j.find(this.root,'.cover');u.instance=this;this.editing=false;if(!this._parentSection)this._parentSection=m.byClass(this.root,'fbEventHeader');if(this.previewing){this.editMode();this.updateCoverImage(this.previewing);}}u.prototype.showLoadingIndicator=function(){var v=t('fbCoverImageContainer');if(v)i.addClass(v,'opaquedLoading');};u.prototype.hideLoadingIndicator=function(){var v=t('fbCoverImageContainer');if(v)i.removeClass(v,'opaquedLoading');};u.prototype.isCoverImageVerticalFlow=function(v){return !(v.style.height);};u.prototype.editMode=function(){h.setEnabled(j.find(this.root,'button.cancelButton'),true);h.setEnabled(j.find(this.root,'button.saveButton'),true);this.hideLoadingIndicator();this._coverImage=j.scry(this.root,'.coverImage')[0];var v=j.scry(this._coverImage,'.coverWrap')[0];if(v){var w=j.find(v,'.coverPhotoImg');this._originalIsVertical=this.isCoverImageVerticalFlow(w);this._originalOffset=n.get(w,this._originalIsVertical?'top':'left');}i.addClass(this._parentSection,'fbEditCover');k.scrollTo(this.root);if(this.previewing){j.remove(this._coverImage);i.show(this._coverImage);}var x=j.scry(this._coverImage,'.coverPhotoImg')[0];if(x)this._createDragger();this.editing=true;g.inform('CoverPhotoEdit',{sender:this,state:"open"});};u.prototype._exitEditMode=function(){if(this._timelineDrag){this._timelineDrag.destroy();this._timelineDrag=null;}j.find(this.root,'input.hiddenPhotoID').value=null;j.find(this.root,'input.hiddenVideoID').value=null;h.setEnabled(j.find(this.root,'button.cancelButton'),false);h.setEnabled(j.find(this.root,'button.saveButton'),false);i.removeClass(this._parentSection,'fbEditCover');this.hideLoadingIndicator();this.previewing=false;g.inform('CoverPhotoEdit',{sender:this,state:"closed"});};u.prototype._createDragger=function(v){var w;if(this._isLegacy){w=j.find(this.root,'input.photoOffsetInput');this._originalIsVertical=true;}else{var x=v===undefined?this._originalIsVertical:v;w=x?j.find(this.root,'input.photoOffsetYInput'):j.find(this.root,'input.photoOffsetXInput');}this._timelineDrag=new p(j.find(this.root,'.coverImage .coverPhotoImg'),w,{height:this._coverHeight,width:this._coverWidth,listenOn:this.cover,vertical:x,killClicks:true});};u.prototype.updateCoverImage=function(v,w,x){this.videoID=x;if(w)this.editMode();j.find(this.root,'input.hiddenPhotoID').value=v;j.find(this.root,'input.hiddenVideoID').value=x||null;h.setEnabled(j.find(this.root,'button.saveButton'),true);if(w)j.replace(j.find(this.root,'.coverImage'),l(w));var y=j.find(j.find(this.root,'.coverImage'),'.coverPhotoImg'),z=this.isCoverImageVerticalFlow(y),aa;if(this._isLegacy){aa=j.find(this.root,'input.photoOffsetInput');}else aa=z?j.find(this.root,'input.photoOffsetYInput'):j.find(this.root,'input.photoOffsetXInput');if(this._timelineDrag){this._timelineDrag.setPicture(y,{offsetInput:aa,vertical:z});}else this._createDragger(z);};u.prototype.cancelUpdate=function(){j.remove(j.scry(this.root,'.coverImage')[0]);j.prependContent(this.cover,this._coverImage);if(this._originalOffset!==undefined)n.set(j.find(this._coverImage,'.coverPhotoImg'),this._originalIsVertical?'top':'left',this._originalOffset);this._exitEditMode();};u.prototype.saveComplete=function(){this._coverImage=j.scry(this.root,'.coverImage')[0];var v=m.byClass(this.root,'fbTimelineTopSectionBase');v&&i.removeClass(v,"_6_5");this._exitEditMode();};u.prototype.isInEditMode=function(){return this.editing;};u.getInstance=function(){return u.instance;};u.instance=null;e.exports=u;});
__d("TimelineCoverDisclaimer",["Dialog"],function(a,b,c,d,e,f){var g=b('Dialog');function h(i,j,k){if(h.displayed===undefined){h.displayed=true;}else return;new g().setModal(true).setTitle(i).setBody(j).setButtonsMessage(k).setButtons(g.OK).show();}e.exports=h;});
__d("legacy:TimelineCoverDisclaimer",["TimelineCoverDisclaimer"],function(a,b,c,d){a.TimelineCoverDisclaimer=b('TimelineCoverDisclaimer');},3);
__d("TimelineMedley",["CSS","DOM","DOMPosition","DOMQuery","PageTransitions","TimelineAppSection","TimelineDynamicSectionConfig","TimelineMonitor","TimelineSection","URI","ViewportBounds","$","csx","cx","ge"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('DOMPosition'),j=b('DOMQuery'),k=b('PageTransitions'),l=b('TimelineAppSection'),m=b('TimelineDynamicSectionConfig'),n=b('TimelineMonitor'),o=b('TimelineSection'),p=b('URI'),q=b('ViewportBounds'),r=b('$'),s=b('csx'),t=b('cx'),u=b('ge'),v='timeline-medley',w='about',x=2,y=false;function z(ea){var fa=ea.getQueryData().sk||ea.getPath().split('/')[2];return m.skmapping[fa]||fa;}function aa(ea){if(ea.getQueryData().id)return ea.getQueryData.id;return ea.getPath().split('/')[1];}for(var ba in o)if(o.hasOwnProperty(ba)&&ba!=="_metaprototype")da[ba]=o[ba];var ca=o===null?null:o.prototype;da.prototype=Object.create(ca);da.prototype.constructor=da;da.__superConstructor__=o;function da(ea,fa,ga){o.call(this,v);this.isOverview=ea.length>1;m.breaker=ga.breaker;l.createFromArray(ea).forEach(this.appendSection.bind(this));n.monitorSection(this);this._lastLoadedSection=this.childSections.get(l.getIDBySK(fa)).setIsLoaded(true);o.setActiveSectionID(this._lastLoadedSection.id);if(y&&this.isMedleyView())this.addSectionPlaceholders();var ha=p.getNextURI();this._vanity=aa(ha);this._sk=z(ha);if(this.isOverview)k.registerHandler(this._transitionHandler.bind(this));}da.prototype.addSectionTeasers=function(){if(!this.isMedleyView()){g.removeClass(this.getNode(),"_c4f");this.thawChildren();this.addSectionPlaceholders();this.addSectionBreak();}};da.prototype.addUpcomingSectionPlaceholders=function(ea,fa){fa=fa||x;while(ea=ea.getNext())if(!this.addSectionPlaceholder(ea,ea.getPrev())&&--fa<=0)break;};da.prototype.addSectionPlaceholder=function(ea,fa,ga){if(!ea.isLoaded()&&u(ea.nodeID))return false;if(!u(ea.nodeID)){h.insertAfter(fa.getNode(),ea.getNode());ea.createTriggerLoader(ga);return false;}return true;};da.prototype.addSectionBreak=function(){if(this._lastLoadedSection.getNext()){h.insertAfter(this.childSections.getHead().getNode(),m.breaker);}else h.remove(m.breaker);};da.prototype.addSectionPlaceholders=function(){this.addUpcomingSectionPlaceholders(this._lastLoadedSection);};da.prototype.getNode=function(){return r(this.id);};da.prototype.isMedleyView=function(){return this._sk===w;};da.prototype.toggleScrollLoad=function(ea){y=ea;if(ea){this.thawChildren();this.addSectionPlaceholders();}else this.freezeChildren();};da.prototype._transitionHandler=function(ea){if(aa(ea)!==this._vanity)return false;var fa=z(ea);if(!fa)return false;if(fa===w){return false;}else{var ga=ea.getQueryData();if(!ga.next_cursor)return false;var ha=this.childSections.getHead();while(ha){if(ha._sk===fa){if(!ha._activeCollection&&!j.scry(ha._activeCollection.getNode(),"._3t3")[0])return false;this._transitionToSection.bind(this,ha,ga).defer();return true;}ha=ha.getNext();}}return false;};da.prototype._transitionToSection=function(ea,fa){var ga=i.getElementPosition(ea.getNode()).y-q.getTop();h.scry(ea.getNode(),"._51k9").forEach(function(ja){g.removeClass(ja,"_51k9");});this._sk=ea._sk;o.setActiveSectionID(ea.id);ea.thaw();g.addClass(this.getNode(),"_c4f");this.freezeChildren();var ha=j.find(ea._activeCollection.getNode(),"._3t3");ea._activeCollection.addContentLoader(ha,fa.next_cursor);ea._activeCollection._contentLoader.load({node:ha});var ia=this.childSections.getHead();while(ia&&ia.id!==ea.id){ia.remove();ia=this.childSections.getHead();}o.inform('Medley/transitionToSection',ea.id);ea.scrollTo(ga<0?ga:0);k.transitionComplete();};da.loadToSection=function(ea,fa){o.setActiveSectionID(ea);o.callWithSection(v,function(ga){var ha=ga.childSections.getHead(),ia=0;while(ha&&ha.id!==ea){ia++;ha=ha.getNext();}if(!ia)return fa(ha);ia--;ia&&ga.addUpcomingSectionPlaceholders(ga.childSections.getHead(),ia);ga.addSectionPlaceholder(ha,ha.getPrev(),true);var ja=ha.subscribe('loaded',function(){fa(ha);ja.unsubscribe();});});};da.scrollToSection=function(ea,fa,ga){o.callWithSection(ea,function(ha){ha.scrollTo(fa,ga);});};da.toggleScrollLoad=function(ea){y=ea;o.callWithSection(v,function(fa){fa.toggleScrollLoad(ea);});};e.exports=da;});
__d("TimelineNavLight",["CSS","DOM","DOMQuery","Parent","TimelineSection","csx","cx"],function(a,b,c,d,e,f){var g=b('CSS'),h=b('DOM'),i=b('DOMQuery'),j=b('Parent'),k=b('TimelineSection'),l=b('csx'),m=b('cx');function n(o){var p=i.scry(o,"._6-7")[0],q=i.scry(o,"._6-6"),r=j.byClass(o,"_70k").offsetWidth,s=q[q.length-1];if(s.offsetLeft+s.offsetWidth>r)g.addClass(o,"_5215");for(var t=q.length-1;t>1;t--)if(q[t].offsetLeft+q[t].offsetWidth>r){h.remove(q[t]);}else break;var u="_529n";g.removeClass(j.byClass(o,u),u);k.subscribe('Medley/transitionToSection',function(v,w){if(p&&w===p.getAttribute('data-medley-id'))return;p&&g.removeClass(p,"_6-7");for(var x=0;x<q.length;++x)if(q[x].getAttribute('data-medley-id')===w){g.addClass(q[x],"_6-7");p=q[x];return;}});}e.exports=n;});
__d("TimelineOGCollectionAddSelector",["AsyncRequest","DOM","Form","TidyArbiterMixin","copyProperties","csx","mixin","tidyEvent"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('DOM'),i=b('Form'),j=b('TidyArbiterMixin'),k=b('copyProperties'),l=b('csx'),m=b('mixin'),n=b('tidyEvent'),o=m(j);for(var p in o)if(o.hasOwnProperty(p)&&p!=="_metaprototype")r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(s,t,u,v){this._endpoint=u;this._button=s;this._buttonParent=s.parentNode;this._audienceSelector=v;var w=h.find(s,"._4ihv");r.inform('addButton',{button:w,root:this._buttonParent});n([t.getMenu().subscribe('rendered',function(x,y){r.inform('menuOpened',{audienceSelector:v});h.appendContent(h.find(y,"._54ng"),v);}),t.subscribe('itemselected',this._onChange.bind(this))]);}r.prototype._onChange=function(s,t){var u=t.getValue(),v=this.inform('addedToCollection',u)||{};new g(this._endpoint).setData(k(i.serialize(this._audienceSelector),v,{action:'add',collection_token:u,mechanism:'add_selector'})).send();};k(r,j);e.exports=r;});
__d("TimelineCurationNUXController",["AppSectionCurationState","AsyncRequest","CSS","DOM","Event","OGCollectionAddMenu","TimelineOGCollectionAddSelector","URI","$","csx","cx","tidyEvent"],function(a,b,c,d,e,f){var g=b('AppSectionCurationState'),h=b('AsyncRequest'),i=b('CSS'),j=b('DOM'),k=b('Event'),l=b('OGCollectionAddMenu'),m=b('TimelineOGCollectionAddSelector'),n=b('URI'),o=b('$'),p=b('csx'),q=b('cx'),r=b('tidyEvent'),s=5,t='pagelet_timeline_medley_movies',u=165,v,w,x,y,z,aa,ba=[],ca={reports:0,about:1,section:2,section_privacy:3,add_button:4,privacy:5,0:'reports',1:'about',2:'section',3:'section_privacy',4:'add_button',5:'privacy'};function da(){ba.forEach(function(na){na.button&&na.button.setAttribute('data-hover','tooltip');na.listener&&na.listener.remove();});ba.length=0;}function ea(na){if(z[na]){z[na].destroy();delete z[na];na==='add_button'&&da();}aa[na]&&aa[na].parentNode&&j.remove(aa[na]);}function fa(na){if(!i.hasClass(na,"_50_y")){i.addClass(na,"_50_y");d(['Animation'],function(oa){new oa(na).to('opacity',0).duration(300).ease(oa.ease.end).hide().go();});}}function ga(na){ha(na);var oa=ca[na]+1;oa&&ia(ca[oa]);}function ha(na){new h('/ajax/timeline/collections/tour/curation/').setAllowCrossPageTransition(true).setData({step:na}).send();ea(na);}function ia(na){y=na;switch(na){case 'reports':d(['TimelineController'],function(oa){oa.runOnceWhenSectionFullyLoaded(function(){ka(j.find(o('timeline_tab_content'),"._3rbg"),na);},'recent','0');});break;case 'about':v=j.scry(o('fbTimelineHeadline'),"._6-6")[1];w=r(k.listen(v,'click',function(){v=null;w.remove();y='section';}));ka(v,na);break;case 'section':if(v){n(v.getAttribute('href')).go();v=null;w&&w.remove();}else d(['OnVisible','TimelineMedley'],function(oa,pa){j.appendContent(j.find(o('pagelet_timeline_main_column'),"._2w3"),aa.section);r(k.listen(aa.section,'click',function(){pa.scrollToSection(t,u,1);fa(aa.section);}));pa.loadToSection(t,function(){ka(o(t),na);var qa=new oa(o(t),function(){fa(aa.section);qa.remove();},false,-u);});});break;case 'section_privacy':d(['TimelineAppSectionCuration'],function(oa){oa.informState(g.showItems,t);ka(j.scry(o(t),'.audienceSelector')[0],na);});break;case 'privacy':k.fire(x,'click');break;}}function ja(na,oa){if(z.add_button){var pa=j.scry(oa,'[data-hover]')[0];ba.push({button:pa,listener:r(k.listen(na,'mouseenter',function(){x=na;ka(na,'add_button');}))});pa&&pa.removeAttribute('data-hover');}}function ka(na,oa){if(z[oa]){z[oa].setContext(na).setOffsetX(5).show();if(oa==='privacy')ea('add_button');}}function la(na,oa,pa){var qa=pa.getAttribute('data-action');if(qa==='next'||qa==='done'){ga(na);}else ha(na);}var ma={init:function(na){var oa=na.next_step,pa=ca[oa];z=na.dialogs;aa=na.links?na.links:[];da();if(oa==='section'&&oa!==y){ea('section');ea('section_privacy');pa+=2;oa=ca[pa];}for(var qa in z)r(z[qa].subscribe('button',la.curry(qa)));if(z.add_button){var ra=na.isViewingSelf?m:l;r([ra.subscribe('menuOpened',function(sa,ta){ka.curry(j.find(ta.audienceSelector,'.audienceSelector'),'privacy').defer(s);}),ra.subscribe('addButton',function(sa,ta){ja.curry(ta.button,ta.root).defer(s);})]);}if(na.isViewingSelf&&pa<ca.add_button)ia(oa);}};e.exports=ma;});
__d("legacy:TimelineCover",["TimelineCover"],function(a,b,c,d){a.TimelineCover=b('TimelineCover');},3);
__d("SubMenu",["Arbiter","CSS","Event","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CSS'),i=b('Event'),j=b('copyProperties');function k(){}k.prototype.init=function(l,m,n,o){this._subMenu=l;this._mainMenu=m;this._forward=n;this._backward=o;g.subscribe('SubMenu/Reset',this._goToMainMenu.bind(this));i.listen(n,'click',this._goToSubMenu.bind(this));i.listen(o,'click',this._goToMainMenu.bind(this));};k.prototype.initAsyncChildMenu=function(l){i.listen(this._forward,'click',function(){this._goToSubMenu();l.load();}.bind(this));};k.prototype._goToMainMenu=function(){h.hide(this._subMenu);h.show(this._mainMenu);};k.prototype._goToSubMenu=function(){h.hide(this._mainMenu);h.show(this._subMenu);};j(k.prototype,{_subMenu:null,_mainMenu:null,_forward:null,_backward:null});e.exports=k;});
__d("legacy:ui-submenu",["SubMenu"],function(a,b,c,d){a.SubMenu=b('SubMenu');},3);
__d("AsyncMenu",["AsyncRequest","copyProperties","emptyFunction"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('copyProperties'),i=b('emptyFunction');function j(k,l){this._uri=k;this._elem=l;}j.prototype.load=function(){this.load=i;g.bootstrap(this._uri,this._elem);};h(j.prototype,{_uri:null,_elem:null});e.exports=j;});